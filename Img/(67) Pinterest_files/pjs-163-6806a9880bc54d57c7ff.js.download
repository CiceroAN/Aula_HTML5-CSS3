(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[163],{"09jw":function(e,t,n){"use strict";var r=n("GyhR"),a=n.n(r),o=n("Qo1m"),i=n("iJ35"),s=n("ePT2"),c=n("VSY/"),l=n("+U6O");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=m(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==u(a)&&"function"!=typeof a?p(r):a,b(p(p(n)),"state",{boardInviteAccepted:!1,boardInvitePending:!0,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),b(p(p(n)),"handleInviteResponse",function(e){var t=n.props,r=t.boardInviteItem,a=t.onDeclineRequest,o=r.board,i=void 0===o?{}:o,c=r.invited_user,l=void 0===c?{}:c;n.setState({isAcceptButtonLoading:e,isIgnoreButtonLoading:!e});var u={board_id:i.id,invited_user_id:l.id},d=s.a.create("BoardInviteResource",u);(e?d.callUpdate():d.callDelete()).then(function(){n.setState({boardInviteAccepted:e,boardInvitePending:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),e||a()})}),n}var n,h,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(h=[{key:"getBoardRep",value:function(e,t){return a.a.createElement(i.b,{to:t,inline:!0},a.a.createElement(l.u,{width:40,height:40,shape:"rounded"},a.a.createElement(l.p,{alt:"",color:"",naturalWidth:40,naturalHeight:40,src:t||"",fit:"cover"})))}},{key:"getBoardInfo",value:function(e,t){return a.a.createElement(i.b,{to:t},a.a.createElement(l.K,{bold:!0},e))}},{key:"getInviteeInfo",value:function(e){var t=e.full_name;return Object(c.i)(o.a._("{{ fullName }} invited you to this board"),{fullName:t})}},{key:"getRequesterInfo",value:function(e){var t=e.username,n=e.full_name;return Object(c.i)(o.a._("{{ fullName }} wants to join your board"),{fullName:n,username:t})}},{key:"getJoinedText",value:function(e){var t=e.username,n=e.full_name;return Object(c.i)(o.a._("{{ fullName }} joined your board"),{fullName:n,username:t})}},{key:"render",value:function(){var e=this;if(!this.state.boardInvitePending&&!this.state.boardInviteAccepted)return null;var t=this.props,n=t.boardInviteItem,r=t.isInboxRedesign,s=n.board,c=n.invited_by_user,u=n.invited_user;if(!s||!u||!c)return null;var d=s.image_cover_url,m=s.name,f=s.url,p=c.id===u.id,b=p?f+"invite/":f;return a.a.createElement("div",{className:"BoardInvite Module news"},a.a.createElement(l.b,{paddingX:r?4:2,display:"flex",direction:"row",paddingY:r?1:4},this.getBoardRep(m,d),a.a.createElement(l.b,{paddingX:3,flex:"grow"},a.a.createElement(l.b,{marginBottom:3},a.a.createElement(i.b,{to:b},a.a.createElement(l.b,{marginBottom:r?2:0},a.a.createElement(l.K,{size:"sm",bold:!0},m))),this.state.boardInvitePending?a.a.createElement(l.K,{size:"sm"},p?this.getRequesterInfo(c):this.getInviteeInfo(c)):a.a.createElement(l.K,{size:"sm"},p?this.getJoinedText(c):o.a._("You joined this board","board invites"))),this.state.boardInvitePending&&a.a.createElement(l.b,{display:"flex",marginStart:-1,marginEnd:-1},a.a.createElement(l.b,{flex:"grow",paddingX:1},a.a.createElement(l.c,{disabled:this.state.isIgnoreButtonLoading,onClick:function(){return e.handleInviteResponse(!1)},text:o.a._("Decline","decline board collaborator invite or request"),size:"sm"})),a.a.createElement(l.b,{flex:"grow",paddingX:1},a.a.createElement(l.c,{color:"red",disabled:this.state.isAcceptButtonLoading,onClick:function(){return e.handleInviteResponse(!0)},text:o.a._("Accept","accept board invite"),size:"sm"}))))))}}])&&d(n.prototype,h),g&&d(n,g),t}(),g=n("Ivf5"),y=n("E56J"),v=n("spTd");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=_(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==w(a)&&"function"!=typeof a?O(r):a,k(O(O(n)),"state",{contactRequestCompleted:!1,isAccepted:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),k(O(O(n)),"handleInviteAcceptResponse",function(){n.setState({isAcceptButtonLoading:!0,isIgnoreButtonLoading:!1}),s.a.create("ContactRequestAcceptResource",{contact_request:n.props}).callUpdate().then(function(e){var t=n.props.dispatch;if(n.setState({isAccepted:!0,contactRequestCompleted:!0,isAcceptButtonLoading:!1}),e&&e.resource_response.data){var r=e.resource_response.data;t(Object(v.c)(r)),t(Object(v.h)(r.id)),t(Object(v.g)(r.id))}})}),k(O(O(n)),"handleInviteDeclineResponse",function(){var e=n.props.onDeclineRequest;n.setState({isAcceptButtonLoading:!1,isIgnoreButtonLoading:!0}),s.a.create("ContactRequestIgnoreResource",{contact_request:n.props}).callDelete().then(function(){n.setState({isAccepted:!1,contactRequestCompleted:!0,isIgnoreButtonLoading:!1}),e()})}),n}var n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,r["PureComponent"]),n=t,(i=[{key:"renderRequestText",value:function(e,t){if(e){var n=e.name,r=e.url;if(n&&r)return c.i(o.a._("{{ senderName }} invited you to this board"),{senderName:t})}return c.i(o.a._("{{ senderName }} wants to send a message to you"),{senderName:t})}},{key:"renderAcceptedBoard",value:function(){var e=this.props,t=e.board,n=e.isInboxRedesign;if(!t)return null;var r=t.name,i=t.url,s=t.image_thumbnail_url;return a.a.createElement(l.t,{href:i},a.a.createElement(l.b,{paddingX:n?4:2,paddingY:4,display:"flex"},a.a.createElement(l.u,{shape:"rounded",width:50,height:50},a.a.createElement(l.p,{alt:r,src:s,naturalHeight:60,naturalWidth:60})),a.a.createElement(l.b,{paddingX:3,flex:"grow",display:"flex",direction:"column",justifyContent:"center"},a.a.createElement(l.b,{marginBottom:n?1:0},a.a.createElement(l.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},r)),a.a.createElement(l.K,{color:"darkGray",size:"sm"},o.a._("You joined this board","Status message for a group board the user has joined.")))))}},{key:"render",value:function(){var e=this.props,t=e.board,n=e.sender,r=e.isInboxRedesign,i=this.state,s=i.contactRequestCompleted,c=i.isAccepted,u=i.isAcceptButtonLoading,d=i.isIgnoreButtonLoading;if(s)return t&&c?this.renderAcceptedBoard():null;var m=n.image_large_url,f=n.full_name,p=n.username;return a.a.createElement(l.b,{paddingX:r?4:2,paddingY:r?3:4,display:"flex",direction:"row"},a.a.createElement(l.b,{height:40,width:40,flex:"none"},a.a.createElement(l.t,{href:"/"+p+"/",onClick:function(){return y.default.increment("web.social.contact_request.profile_nav")}},a.a.createElement(l.a,{name:p,src:m}))),a.a.createElement(l.b,{paddingX:3,flex:"grow"},a.a.createElement(l.b,{marginBottom:3},t?a.a.createElement(l.t,{href:t.url},a.a.createElement(l.K,{bold:!0,size:"sm"},t.name)):a.a.createElement(l.t,{href:"".concat(p),onClick:function(){return y.default.increment("web.social.contact_request.profile_nav")}},a.a.createElement(l.b,{marginBottom:r?1:0},a.a.createElement(l.K,{bold:!0,size:"sm"},f))),a.a.createElement(l.K,{size:"sm"},this.renderRequestText(t,f))),a.a.createElement(l.b,{display:"flex",marginLeft:-1,marginRight:-1},a.a.createElement(l.b,{paddingX:1,flex:"grow"},a.a.createElement(l.c,{disabled:d,onClick:this.handleInviteDeclineResponse,size:"sm",text:o.a._("Decline","ignore contact request")})),a.a.createElement(l.b,{paddingX:1,flex:"grow"},a.a.createElement(l.c,{color:"red",disabled:u,onClick:this.handleInviteAcceptResponse,size:"sm",text:o.a._("Accept","accept contact request")})))))}}])&&E(n.prototype,i),u&&E(n,u),t}(),S=Object(g.connect)()(I),j=n("Y2BC"),x=n("9Y9K"),R=n("Irlq");function N(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var q=function(e,t){return e.created_at&&t.created_at?new Date(e.created_at)>new Date(t.created_at)?-1:1:0},A=64;t.a=Object(x.compose)(Object(j.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1}),Object(j.b)({name:"BoardOwnerCollaboratorJoinRequestsResource",key:"boardJoinRequests",options:function(e){return{field_set_key:"news"}}},{allowStale:!1}),Object(j.b)({name:"BoardInvitesResource",key:"boardInvites",options:function(e){return{current_user:!0,field_set_key:"news"}}},{allowStale:!1}))(function(e){var t=e.boardJoinRequests,n=e.boardInvites,a=e.contactRequests,i=e.onClick,s=e.showAllRequests,c=e.handleCancelViewContactRequests,u=e.isInboxRedesign;if(!t.isLoaded&&!t.isLoaded&&!t.isLoaded)return null;var d=N(t.data||[]).concat(N(n.data||[]),N(a.data||[])),m=function(){a.refreshData()},f=function(){n.refreshData(),t.refreshData()};d.sort(q);var p=!s&&d.length>2,b=p?d.slice(0,2):d;return r.createElement(r.Fragment,null,s&&r.createElement(l.b,{padding:u?4:2,display:"flex",direction:"row",alignItems:"center",justifyContent:"between"},r.createElement(l.b,{column:2},r.createElement(l.o,{icon:"arrow-back",accessibilityLabel:o.a._("Back to inbox","Icon to exit messages feed and go back to inbox"),onClick:c,size:u?"sm":"md"})),r.createElement(l.b,{column:8,overflow:"hidden"},u?r.createElement(l.K,{bold:!0,size:"xl",align:"center",truncate:!0},o.a._("All invites","Heading for the invites and requests feed, which includes contact requests, board invites, and board join requests")):r.createElement(l.K,{bold:!0,align:"center",truncate:!0},o.a._("Requests","Heading for the requests feed, which includes contact requests, board invites, and board join requests"))),r.createElement(l.b,{flex:"grow",column:2})),r.createElement(l.b,{overflow:"auto",height:s&&d.length>2?"calc(100% - ".concat(A,"px)"):"auto",dangerouslySetInlineStyle:{__style:{overscrollBehavior:"none"}}},b.map(function(e){var t=e.type,n=e.id;return"contactrequest"===t?r.createElement(S,Object.assign({},e,{key:n,onDeclineRequest:m,isInboxRedesign:u})):"collaboratorinvite"===t?r.createElement(h,{boardInviteItem:e,key:n,onDeclineRequest:f,isInboxRedesign:u}):null})),p&&r.createElement(l.b,{width:"100%",paddingX:2,paddingY:2,marginTop:-1},r.createElement(l.c,{text:Object(R.b)(o.a._("See all {{ n }} invites"),{n:d.length}).join(""),size:"sm",color:"white",onClick:i})),!u&&r.createElement(l.j,null))})},"3nKd":function(e,t,n){"use strict";n.r(t);var r=n("GyhR"),a=n.n(r),o=n("Ivf5"),i=n("z1WJ"),s=n("09jw"),c=n("VSY/"),l=n("hXwk"),u=n("PNko"),d=n.n(u),m=n("Qo1m"),f=n("CST5"),p=n("iJ35"),b=(n("hvnN"),n("ePT2")),h=n("UHJ+"),g=n("NmcB"),y=n("spTd"),v=n("+U6O");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){var t=e.name,n=e.emails,r=e.users,o=e.viewerId,i=r.filter(function(e){return e.id!==o});return a.a.createElement(v.b,{paddingY:1},a.a.createElement(v.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},t||i.map(function(e){return e.first_name||e.full_name}).concat(n).join(", ")))}function S(e){var t=e.message,n=e.viewerId,r=t.board,o=t.created_at,i=t.pin,s=t.sender,l=t.text,u=t.user,d=l,f=s.id===n,p=s.first_name;return d?d&&f&&(d=m.a._("You","messaging in the inbox, when the viewer(You) sends a message to another user")+": "+d):i?d=f?m.a._("You sent a Pin","last pin message text preview that you sent"):c.i(m.a._("{{ senderName }} sent a Pin","last pin message text preview that sender({{ senderName }}) sent"),{senderName:p}):r?d=f?m.a._("You sent a board","last board message text preview that you sent"):c.i(m.a._("{{ senderName }} sent a board","last board message text preview that sender({{ senderName }}) sent"),{senderName:p}):u&&(d=f?m.a._("You sent a user profile","last user profile send message text preview that you sent"):c.i(m.a._("{{ senderName }} sent a user profile","last user profile send message text preview that sender({{ senderName }}) sent"),{senderName:p})),a.a.createElement(v.b,{display:"flex",direction:"row",flex:"grow",alignItems:"baseline"},a.a.createElement(v.b,{marginRight:2,flex:"shrink",dangerouslySetInlineStyle:{__style:{maxWidth:"80%"}}},a.a.createElement(v.K,{color:"darkGray",size:"sm",truncate:!0},d)),a.a.createElement(v.b,{flex:"none"},a.a.createElement(v.K,{color:"gray",size:"xs",truncate:!0},m.a.getHumanizedTimesince(o,{isAbbreviated:!0}))))}function j(e){var t=e.board,n=e.pin,r=e.user,o=null;if(n){var i=n.images["236x"]||n.images["136x136"];o=a.a.createElement(v.u,{shape:"rounded",wash:!0,height:60,width:40},a.a.createElement(v.p,{alt:"",src:i.url,naturalWidth:i.width,naturalHeight:i.height,color:n.dominant_color,fit:"cover"}))}else t?o=a.a.createElement(v.u,{shape:"rounded",width:40,height:40},a.a.createElement(v.p,{alt:"",src:t.image_thumbnail_url||"",naturalWidth:60,naturalHeight:60})):r&&(o=a.a.createElement(v.b,{shape:"rounded",width:40,height:40},a.a.createElement(v.a,{name:r.full_name,src:r.image_large_url})));return o?a.a.createElement(v.b,{display:"flex",alignItems:"center",width:30,marginLeft:5,marginRight:6},a.a.createElement(v.b,{display:"block"},o)):null}var x=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=_(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==w(a)&&"function"!=typeof a?O(r):a,k(O(O(n)),"state",{isAnimatingOut:!1,unread:n.props.data.unread||0}),k(O(O(n)),"handleHideConversation",function(e){e.stopPropagation();var t=n.props,r=t.data,a=t.dispatch,o=r.id;b.a.create("ConversationResource",{conversation_id:o}).callDelete({showError:!1}),n.setState({isAnimatingOut:!0}),setTimeout(function(){a(Object(y.d)(o))},500),n.removeConversationChatHead(o),n.logConversationItemHide(o)}),k(O(O(n)),"handleConversationItemClick",function(){var e=n.props.data;n.setState({unread:0}),e.board||n.showConversationChatHead(e),n.logConversationItemClick()}),k(O(O(n)),"logConversationItemClick",function(){Object(g.a)(101,{component:54,element:277})}),k(O(O(n)),"logConversationItemHide",function(e){Object(g.a)(182,{component:54,element:277,conversation_id:e})}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,r["Component"]),n=t,(o=[{key:"showConversationChatHead",value:function(e){var t=this.props.dispatch,n=e.id;t(Object(y.h)(n)),t(Object(y.g)(n)),t(h.a)}},{key:"removeConversationChatHead",value:function(e){var t=this.props.dispatch;t(Object(y.e)(e)),t(Object(y.b)(e))}},{key:"renderItemContent",value:function(){var e=this.state.isAnimatingOut,t=this.props,n=t.data,r=t.viewerId,o=n.board,i=n.emails,s=n.last_message,c=n.name,u=n.users,p=i||[];return a.a.createElement("div",{className:d()("ConversationListItemReact",{conversationHidden:e})},a.a.createElement(v.b,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{marginRight:10}}},a.a.createElement(l.a,{board:o,emails:p,users:u})),a.a.createElement(v.b,{display:"flex",width:"85%",height:"100%"},a.a.createElement(v.b,{flex:"grow",display:"flex",direction:"column",height:"100%",paddingY:2,maxWidth:"233"},a.a.createElement(I,{name:c,emails:i||[],users:u,viewerId:r}),a.a.createElement(v.b,{flex:"grow",display:"flex",direction:"column"},s?a.a.createElement(S,{message:s,viewerId:r}):null)),s?a.a.createElement(j,s):null),this.state.unread>0?a.a.createElement("span",{className:"conversationUnreadMark"}):null,a.a.createElement(f.a,{className:"conversationCloseButton",hasText:!0,onClick:this.handleHideConversation,text:m.a._("×","close button"),type:"borderless"}))}},{key:"render",value:function(){var e=this.props.data,t=e.board,n=e.users;return n&&n.length?t?a.a.createElement(p.b,{onClick:this.handleConversationItemClick,to:t.url},this.renderItemContent()):a.a.createElement("div",{onClick:this.handleConversationItemClick,role:"button"},this.renderItemContent()):null}}])&&E(n.prototype,o),i&&E(n,i),t}();var R=Object(o.connect)(function(e){return{viewerId:e.viewer.id}})(x),N=n("E56J"),q=n("8rWZ"),A=n("Y2BC"),P=n("SMmS"),B=n("9Y9K");function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=500,Y="existingConversationsView",K="newMessageView",J="contactRequestsView",X=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=T(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==L(a)&&"function"!=typeof a?z(r):a,V(z(z(n)),"state",{currentView:Y,hoverColor:"transparent"}),V(z(z(n)),"handleCancelSecondaryView",function(){n.setState({currentView:Y})}),V(z(z(n)),"handleNewMessageButtonClick",function(){n.setState({currentView:K}),n.logNewMessageButtonClick()}),V(z(z(n)),"handleViewContactRequestsClick",function(){n.setState({currentView:J})}),V(z(z(n)),"handleScroll",function(){n.props.isFetching||(n._container&&n._container.scrollHeight-n._container.scrollTop-n._container.clientHeight)<H&&n.fetchMore()}),V(z(z(n)),"handleMouseHoverSVG",function(){n.setState({hoverColor:"rgba(0, 0, 0, 0.06)"})}),V(z(z(n)),"handleMouseLeaveSVG",function(){n.setState({hoverColor:"transparent"})}),V(z(z(n)),"logNewMessageButtonClick",function(){Object(g.a)(101,{component:54,element:275})}),V(z(z(n)),"handleDismiss",function(){var e=n.props.onDismiss;N.default.increment("web_messaging.close_from_conversation_panel"),e()}),V(z(z(n)),"handleBoardInvitesDidUpdate",function(){var e=n.props,t=e.boardInvites,r=e.boardJoinRequests;t.refreshData(),r.refreshData()}),V(z(z(n)),"handleContactRequestsDidUpdate",function(){n.props.contactRequests.refreshData()}),n}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.props.isFullAuth&&this._container.addEventListener("scroll",this.handleScroll),Object(g.a)(7161,{})}},{key:"componentWillUnmount",value:function(){this._container.removeEventListener("scroll",this.handleScroll)}},{key:"fetchMore",value:function(){var e=this.props,t=e.isAtEnd,n=e.isFetching,r=e.fetchMoreData,a=e.isFullAuth;!n&&a&&(t?this._container.removeEventListener("scroll",this.handleScroll):r())}},{key:"renderNewMessageView",value:function(){var e=this.props.conversations,t=void 0===e?[]:e;return a.a.createElement("div",{className:"newMessageContainer"},a.a.createElement(i.default,{conversationItems:t,handleCancelNewMessageClick:this.handleCancelSecondaryView,isWebMessagingRedesignExpEnabled:!1,showToast:function(){}}))}},{key:"renderContactRequestsView",value:function(){return a.a.createElement(s.a,{showAllRequests:!0,handleCancelViewContactRequests:this.handleCancelSecondaryView,isInboxRedesign:!1})}},{key:"renderNewEmptyState",value:function(){return a.a.createElement(v.b,{marginTop:12,padding:12,alignItems:"start"},a.a.createElement(v.m,{size:"sm",color:"darkGray"},m.a._("Share ideas with your friends","introduction message when inbox is empty")),a.a.createElement(v.b,{marginTop:6},a.a.createElement(v.c,{text:m.a._("New message","compose button for inbox empty state"),onClick:this.handleNewMessageButtonClick,size:"md",color:"red",accessibilityLabel:m.a._("composeNewMessage","accessibility label for compose button when inbox is empty"),inline:!0})))}},{key:"renderExistingConversationsView",value:function(){var e=this.props,t=e.conversations,n=void 0===t?[]:t,r=e.isAtEnd;return a.a.createElement("div",{className:"existingConversationsContainer"},a.a.createElement(v.b,{position:"relative"},a.a.createElement(v.b,{position:"absolute",right:!0,dangerouslySetInlineStyle:{__style:{padding:10}}},a.a.createElement(v.o,{onClick:this.handleNewMessageButtonClick,icon:"compose",iconColor:"gray",size:"sm",accessibilityLabel:m.a._("composeNewMessage","accessibility label for compose icon button")})),a.a.createElement(v.b,{paddingY:4,dangerouslySetInlineStyle:{__style:{paddingRight:"25%",paddingLeft:"25%"}}},a.a.createElement(v.K,{bold:!0,size:"md",align:"center"},m.a._("Messages","header text for conversations dropdown")))),a.a.createElement(s.a,{onClick:this.handleViewContactRequestsClick,isInboxRedesign:!1}),a.a.createElement(v.b,{position:"relative"},a.a.createElement(v.b,{position:"absolute",width:"100%",top:!0,marginBottom:12},a.a.createElement("ul",{className:"conversationItems"},0===n.length&&r?this.shouldShowEmptyState&&this.renderNewEmptyState():n.map(function(e,t){return a.a.createElement("li",{className:"conversationItemWrapper",key:e.id},a.a.createElement(R,{data:e}),t<n.length-1?a.a.createElement(v.j,null):null)})))))}},{key:"renderMessageView",value:function(){switch(this.state.currentView){case Y:return this.renderExistingConversationsView();case K:return this.renderNewMessageView();case J:return this.renderContactRequestsView()}}},{key:"render",value:function(){var e=this;return a.a.createElement(q.a,{view:42,viewParameter:203},a.a.createElement("div",{className:"conversationPanel",ref:function(t){e._container=t}},this.renderMessageView()))}},{key:"shouldShowEmptyState",get:function(){var e=this.props,t=e.boardInvites,n=e.boardJoinRequests,r=e.contactRequests;return 0===(t&&t.data||[]).length+(n&&n.data||[]).length+(r&&r.data||[]).length}}])&&D(n.prototype,o),c&&D(n,c),t}();function G(e){return e.sort(function(e,t){return new Date((t.last_message||t).created_at)-new Date((e.last_message||e).created_at)}),e}var U=Object(B.compose)(Object(o.connect)(function(e){var t,n=e.conversations,r=e.viewer;return{conversations:G((t=n.data,Object.keys(t).map(function(e){return t[e]})).filter(function(e){return e.users.length>1&&e.last_message})),isFullAuth:r.isAuth&&!r.isLimitedLogin}}),Object(P.b)({name:"ConversationsResource",key:"conversationsResource"},{allowStale:!1}),Object(A.b)({name:"BoardOwnerCollaboratorJoinRequestsResource",key:"boardJoinRequests",options:{field_set_key:"news"}},{allowStale:!1}),Object(A.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1}),Object(A.b)({name:"BoardInvitesResource",key:"boardInvites",options:{current_user:!0,field_set_key:"news"}},{allowStale:!1}))(X),W=n("2YES");function F(e){var t=e.onDismiss;return a.a.createElement("div",{className:"NewsConversationsDropdown"},a.a.createElement("div",{className:"content"},a.a.createElement(v.b,{maxHeight:500},a.a.createElement(W.a,null,function(e){return a.a.createElement(U,{requestContext:e,onDismiss:t})}))))}n.d(t,"default",function(){return F})},AdUJ:function(e,t,n){"use strict";var r=n("GyhR");t.a=r.createContext(0)},CST5:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("GyhR"),a=n("XQD6"),o=n("PNko"),i=n.n(o),s=n("ogC+");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=this,o=(e=u(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==c(o)&&"function"!=typeof o?m(r):o,f(m(m(n)),"handleClick",function(e){e&&e.preventDefault(),n.props.loading||(n.props.src?Object(a.a)(n.props.src):n.props.onClick&&n.props.onClick(e),n.props.stopPropagation&&e.stopPropagation())}),n}var n,o,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.accessibilityLabel,n=e.children,a=e.disabled,o=e.hasIcon,c=e.htmlType,l=e.id,u=e.itemProp,d=e.large,m=e.loading,f=e.onMouseDown,p=e.onMouseEnter,b=e.onMouseLeave,h=e.rel,g=e.rounded,y=e.showText,v=e.style,w=e.text,E=e.type,_=i()(this.props.className,{Button:"plain"!==E,Module:"plain"!==E,btn:"borderless"!==E&&"plain"!==E,hasIcon:o,hasText:y,rounded:!0===g,leftRounded:"left"===g,rightRounded:"right"===g,borderless:"borderless"===E,primary:"primary"===E,disabled:a,large:d});return r.createElement("button",{"aria-label":t||null,className:_,disabled:a,id:l,itemProp:u,onClick:this.handleClick,onMouseDown:f,onMouseEnter:p,onMouseLeave:b,rel:h,style:v,type:c},m?r.createElement(s.a,{size:"small"}):null,n,o?r.createElement("em",null):null,r.createElement("span",{className:y?"buttonText":"accessibilityText"},w))}}])&&l(n.prototype,o),p&&l(n,p),t}();f(p,"defaultProps",{disabled:!1,htmlType:"button",large:!1,rounded:!0,showText:!0,type:"default"})},"ogC+":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("GyhR"),a=n.n(r);n("hvnN");function o(e){var t=e.mask,n=e.loading,r=e.size;return a.a.createElement("div",null,t&&a.a.createElement("div",{className:"moduleMask",style:{bottom:0,left:0,right:0,top:0}}),n&&a.a.createElement("div",{className:"Spinner"},a.a.createElement("div",{className:"small"===r?"spinnerSmall":"spinnerMedium"})))}o.defaultProps={loading:!0,mask:!0,size:"medium"}}}]);
//# sourceMappingURL=pjs-163-6806a9880bc54d57c7ff.js.map
