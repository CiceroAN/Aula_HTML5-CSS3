(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinFeedbackPageDesktop~PinSaveButtonCommon"],{"/TEi":function(e,t,n){"use strict";var o={get:function(e){n.e("ScriptCommon").then(n.bind(null,"91Tc")).then(function(t){var n=t.default;n.load([],"https://apis.google.com/js/client:platform.js","gplus"),n.ready("gplus",function(){e(window.gapi)})})}};t.a=o},"0Wmr":function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u});var o=n("UhjI"),r=n("ePT2"),i="collaborator_approve_invite";function a(e,t){return r.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function c(e,t){return r.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function s(e,t){return function(n){return r.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(function(){o.a.trackEvent(i,"success")}).catch(function(){return o.a.trackEvent(i,"error")})}}function u(e,t,n){return function(t){var o=e.invited_user,i=e.status,a=e.board.id;return r.a.create("accepted"===i?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:a,field_set_key:"boardEdit",invited_user_id:o.id}).callDelete({showError:!1})}}},"8WpO":function(e,t,n){"use strict";var o=n("GyhR"),r=n.n(o),i=n("+U6O");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=["#4A90E2","#0FA573","#B469EB","#F13535","#E2780D"],d=120,h=800,m=function(e,t){return Math.random()*((e||1)-(t||0))+(t||0)},b=function(e){return e*(Math.PI/180)},y=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,u=new Array(c),y=0;y<c;y++)u[y]=arguments[y];return r=this,i=(e=s(t)).call.apply(e,[this].concat(u)),n=!i||"object"!==a(i)&&"function"!=typeof i?l(r):i,p(l(l(n)),"animationTimer",null),p(l(l(n)),"canvasRemovalTimer",null),p(l(l(n)),"containerRef",Object(o.createRef)()),p(l(l(n)),"buildCanvas",function(){if(!n.containerRef.current)return null;var e=n.containerRef.current.getBoundingClientRect(),t=e.height,o=e.width,r=2.5*t,i=document.createElement("canvas");return i.style.position="absolute",i.style.left="".concat(0-(r-o)/2,"px"),i.style.top="".concat(0-(r-t)/2,"px"),i.style.pointerEvents="none",i.style.width="".concat(r,"px"),i.style.height="".concat(r,"px"),i.style.overflow="visible",i.width=r,i.height=r,i}),p(l(l(n)),"explode",function(){var e=n.buildCanvas();if(e){var t=n.containerRef.current,o=e.getContext("2d");t.prepend(e);!function e(t,n,o,r){window.requestAnimationFrame(function(){return e(t,n,o,r)}),n.clearRect(0,0,o,r),t.forEach(function(e,t){e.x+=e.speed*Math.cos(b(e.degree)),e.y+=e.speed*Math.sin(b(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(n.beginPath(),n.globalAlpha=e.opacity,n.fillStyle=e.color,n.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),n.fill())})}(Array.from(Array(d)).map(function(t,n){return{x:e.width/2,y:e.height/2,radius:Math.round(m(10,30)),color:f[Math.floor(Math.random()*f.length)],degree:Number(m(0,360).toFixed(1)),speed:Math.round(m(0,25)),friction:.9,opacity:Number(m(0,.5).toFixed(1)),yVel:0,gravity:.04}}),o,e.width,e.height),n.canvasRemovalTimer=setTimeout(function(){t.removeChild(e)},n.props.delay+h)}}),n}var n,y,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o["PureComponent"]),n=t,(y=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.delay,o=t.startAnimation,r=e.startAnimation;o&&r!==o&&(this.animationTimer=setTimeout(this.explode,n))}},{key:"componentWillUnmount",value:function(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}},{key:"render",value:function(){return r.a.createElement(i.b,{ref:this.containerRef,position:"relative"},this.props.children)}}])&&c(n.prototype,y),v&&c(n,v),t}();p(y,"defaultProps",{delay:0}),t.a=y},FGWo:function(e,t,n){"use strict";var o=n("GyhR"),r=n("Ivf5"),i=(n("hvnN"),n("dBWR")),a=n("XXWR");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2],!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var n=arguments.length>4?arguments[4]:void 0;return function(r){function d(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),n=this,o=u(d).call(this,e),t=!o||"object"!==c(o)&&"function"!=typeof o?p(n):o,f(p(p(t)),"state",{}),f(p(p(t)),"setExtraContextState",function(e){return t.setState({extraContext:e})}),t}var h,m,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,o["Component"]),h=d,(m=[{key:"componentDidMount",value:function(){this.dispatchPlacementMount(!1)}},{key:"UNSAFE_componentWillUpdate",value:function(n,o){var r=n.dispatch,c=n.experience,s=t;if("function"==typeof t){var u=o.extraContext||{};s=t(n,u)}if(!Object(a.d)(c)&&"function"==typeof t&&s&&Object.keys(s).length){var l=t(this.props,this.state);JSON.stringify(l)!==JSON.stringify(s)&&r(Object(i.c)(e,s))}!c||this.props.experience&&c.id===this.props.experience.id||r(Object(i.i)(e,s))}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)(Object(i.k)(e))}},{key:"dispatchPlacementMount",value:function(n){var o=this.props.dispatch,r={};r="function"==typeof t?t(this.props,this.state):Object.assign({},t),o(Object(i.j)(e,r,n))}},{key:"render",value:function(){var e=this.props.experience;return o.createElement(n,Object.assign({},this.props,{setPlacementExtraContext:this.setExtraContextState,experience:Object(a.d)(e)?e:null}))}}])&&s(h.prototype,m),b&&s(h,b),d}()}var h={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return function(o){var i=function(e){return function(t){return{experience:t.experiences.eligibleExperiences[e]}}}(e);n=Object.assign({},h,n);var a=d(e,t,n.shouldUsePlacedExperience,n.dispatchMountActionDuringSSR,o);return Object(r.connect)(i)(a)}}},RTyF:function(e,t,n){"use strict";var o=n("GyhR"),r=n.n(o),i=n("Ivf5"),a=n("POeB"),c=n("UgxU"),s=n("A6bX"),u=n("XwKk"),l=n("Qo1m");var p=n("4+0X"),f=n("ePT2"),d=n("TYRv"),h=n("KCDi"),m=n("SMmS"),b=n("KsVg"),y=n("lixz"),v=n("CAUj"),g=n("9Y9K"),_=n("VSY/"),w=n("dBWR"),S=n("MFVv"),O=n("mpDz"),P=n("NmcB"),C=n("3Wjl"),E=n("Kqiz"),j=n("evwu");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){I(e,t,n[t])})}return e}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",function(){return F}),n.d(t,"a",function(){return L});var D=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>â€¦)]+/gi,M="236x",N=function(e){function t(){var e,n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var m=arguments.length,b=new Array(m),y=0;y<m;y++)b[y]=arguments[y];return o=this,i=(e=x(t)).call.apply(e,[this].concat(b)),n=!i||"object"!==T(i)&&"function"!=typeof i?B(o):i,I(B(B(n)),"state",{boardSavedTo:null,displaySuccessAnimation:!1,experienceComplete:function(){},experienceDismiss:function(){},newPin:null,modalTitle:n.props.showCreate?l.a._("Create board"):l.a._("Choose board")||"",pinDescription:n.props.pin&&n.props.pin.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1},showSharingUpsell:!1}),I(B(B(n)),"unmounted",!1),I(B(B(n)),"setModalTitle",function(e){return n.safeSetState({modalTitle:e})}),I(B(B(n)),"updateDescription",function(e){n.safeSetState({pinDescription:e})}),I(B(B(n)),"close",function(){var e=n.props.onClose;e&&e(),n.setPWTAbort("boardPickerClose"),Object(P.a)(2502,{component:5,element:610})}),I(B(B(n)),"safeSetState",function(e,t){n.unmounted?t&&t():n.setState(e,t)}),I(B(B(n)),"getPinResource",function(e,t,o){var r,i=n.props,a=i.color,c=i.location,s=i.pin,l=i.method,p=i.guid,d=i.additionalCreateFields,h=i.advertiser_id;s.id&&(r=Object(u.a)(s,c)||"".concat(s.tracking_params,"~0"));var m=s.id?"RepinResource":"PinResource",b=!s.id&&s.image_url?Object(S.b)(s.image_url,s.link):"",y=R({},d,{board_id:t||"",color:a||"",clientTrackingParams:r,description:n.state.pinDescription,guid:p||"",link:s.link,image_base64:s.image_base64,image_url:b,is_buyable_pin:!1,is_removable:s.promoted_is_removable,media_upload_id:s.media_upload_id,method:l||"",pin_id:s.id||"",section:o,title:s.title||""},h?{advertiser_id:h}:{});if(!e){var v=n.state.sharing,g=v.facebook,_=v.twitter;y.share_facebook=g,y.share_twitter=_}return f.a.create(m,y)}),I(B(B(n)),"triggerPubSubs",function(e){p.a.instance.publish("currentUser","pinCreated",e),p.a.instance.publish(e.board.id,"pinCreated",{pin:e})}),I(B(B(n)),"makeCancelablePromise",function(e){var t=!1;return{promise:new Promise(function(n,o){e.then(function(e){return t?o({isCanceled:!0}):n(e)}),e.catch(function(e){return o(t?{isCanceled:!0}:e)})}),cancel:function(){t=!0}}}),I(B(B(n)),"getSavedToText",function(e,t){return t?[Object(_.c)(l.a._("Saved to {{sectionName}} in {{boardName}}","Toast for successfully saving to a section within a board"),{sectionName:t.title,boardName:e})]:[l.a._("Saved to"),e]}),I(B(B(n)),"handleLogToastClick",function(){Object(P.a)(101,{component:20,view:52})}),I(B(B(n)),"showSuggestedBoardToast",function(e,t,o,i){var a=n.props,c=a.hideAllToasts,s=a.shouldShowToast,u=a.showToast;if(s&&!n.state.showSharingUpsell&&e){c();var p=e.name,f=e.url,d=e.image_thumbnail_url;u(function(e){var t=e.onHide;return r.a.createElement(h.a,{duration:E.a,onHide:t,text:[l.a._("You might also like","Post repin suggested board"),p],href:f,imageUrl:d,onClick:n.handleLogToastClick})})}}),I(B(B(n)),"showBoardSavedToast",function(e,t){(0,n.props.showToast)(function(o){var i=o.onHide;return r.a.createElement(h.a,{duration:E.a,onHide:i,text:n.getSavedToText(e.name,t),href:t?"".concat(e.url).concat(t.slug):e.url,imageUrl:e.image_cover_url,onClick:n.handleLogToastClick})})}),I(B(B(n)),"dismissModal",function(e){var t=n.state,o=t.resolve,r=t.newPin;o&&o(r)}),I(B(B(n)),"fetchBoardRecommendation",function(e){return f.a.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(function(e){return Promise.resolve(e.resource_response.error?null:e.resource_response.data[0])})}),I(B(B(n)),"handleBoardSaveSuccess",function(e,t,o,r){var i=n.props,a=i.action,u=i.dispatch,p=i.pin,f=i.setCompletionPromise,d=i.viewerUserId;c.a.instance.refreshPlacedExperiences();var h=c.a.instance.getPlacedExperience(33),m=c.a.instance.getPlacedExperience(11),b=n.makeCancelablePromise(new Promise(function(i,c){var s=e.resource_response.data;n.triggerPubSubs(s);var p=n.state.pinDescription.match(D)||[];p.length>0&&Object(P.a)(2,{element:10273,hashtags:JSON.stringify(p),objectId:n.props.pin.id});var f=function(){n.showBoardSavedToast(t,o),n.safeSetState({displaySuccessAnimation:!0,modalTitle:l.a._("Board created","Modal title after creating a new board"),newPin:s,resolve:i})};"repin"===a?(n.fetchBoardRecommendation(s).then(function(e){n.showSuggestedBoardToast(e,s,o,r)}),h&&500388===h.experience_id?n.safeSetState({showSharingUpsell:!0,newPin:s,resolve:i}):r?f():i(s)):("create"===a&&m&&500840===m.experience_id&&(u({type:"PIN_CREATED_VIA_CREATOR_CHECKLIST",payload:{pin_created_via_creator_checklist:!0}}),Object(P.a)(7510,{component:13233})),r?f():i(s))}));if(r||u(Object(O.c)(p.id)),f(b),u(Object(j.c)(t)),u(Object(v.d)({boardId:t.id,sectionId:o&&o.id,increment:1})),d&&(u(Object(C.a)({userId:d,increment:1})),u(Object(w.d)())),o||!t.image_cover_url){var y=p.image_url,g=p.images;t.image_cover_url=y||g&&g[M]&&g[M].url||"",u(Object(j.d)({},t))}o&&u(Object(s.a)(o.id)),u({type:"PIN_SAVE",payload:{pinId:p.id,saved:!0}})}),I(B(B(n)),"handleSaveToBoard",function(e,t,o){var r=n.props,i=r.onToggleModal,c=r.shouldShowToast;n.setPWTAbort("boardPickerSubmit"),c&&!o&&(n.close(),n.showBoardSavedToast(e,t));var s="secret"===(e.privacy||""),u={board:t?t.id:e.id,state:E.c.LOADING};n.safeSetState({boardSavedTo:u},function(){n.getPinResource(s,e.id,(t||{}).id).callCreate({showError:!1}).then(function(r){n.safeSetState({boardSavedTo:Object.assign(u,{state:E.c.SUCCESS})},function(){return n.handleBoardSaveSuccess(r,e,t,o)}),i&&!o&&i(!1)}).catch(function(e){n.unmounted||n.safeSetState({boardSavedTo:null}),a.default.showError(e.message_detail||e.message);var t=n.makeCancelablePromise(Promise.reject(e));n.props.setCompletionPromise(t),i&&i(!1)})})}),I(B(B(n)),"handleSocialConnectSet",function(e,t){var o=Object.assign({},n.state.sharing);e===d.a.FACEBOOK?o.facebook=t:e===d.a.TWITTER&&(o.twitter=t),n.safeSetState({sharing:o})}),I(B(B(n)),"handleNewBoardAnimationCompletion",function(){var e=n.props,t=e.dispatch,o=e.pin;t(Object(O.c)(o.id))}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,r.a.Component),n=t,(o=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.boardWithSection,o=t.showCreate;this.safeSetState({pinDescription:e.pin&&e.pin.description||e.description||""}),n&&o?this.setModalTitle(l.a._("Create section","modal title for create section pane")):n&&!o&&this.setModalTitle(l.a._("Choose section","modal title for choose section"))}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"setPWTAbort",value:function(e){Object(y.a)(e,16)}},{key:"render",value:function(){var e=this.close,t=this.dismissModal,n=this.handleNewBoardAnimationCompletion,o=this.handleSaveToBoard,r=this.handleSocialConnectSet,i=this.setModalTitle,a=this.updateDescription,c=this.state,s=c.boardSavedTo,u=c.displaySuccessAnimation,l=c.modalTitle,p=c.newPin,f=c.showSharingUpsell,d=this.props,h=d.color,m=d.pin;return this.props.children({boardSavedTo:s,color:h,dismissModal:t,displaySuccessAnimation:u,handleAbort:e,handleNewBoardAnimationCompletion:n,handleSaveToBoard:o,handleSocialConnectSet:r,modalTitle:l,newPin:p,pin:m,setModalTitle:i,showSharingUpsell:f,updateDescription:a})}}])&&k(n.prototype,o),i&&k(n,i),t}(),U=function(e){var t=e.advertiser,n=e.viewer,o=e.location,r=n.isAuth&&t&&t.owner_user_id!==n.id?t.id:null;return R({location:o},r?{advertiser_id:r}:{},n.isAuth?{viewerUserId:n.id}:{})},F=Object(g.compose)(Object(i.connect)(U),b.a)(N),L=Object(g.compose)(Object(i.connect)(U),b.a,Object(m.b)({name:"FakePinResource",key:"pin",options:function(e){return R({},e.fakeResource.options)}}))(N)},TYRv:function(e,t,n){"use strict";var o,r=n("GGL+"),i=n.n(r),a=n("POeB"),c=n("/TEi"),s=n("Qo1m"),u=n("D+W/"),l=n("ggpB"),p={scope:"profile email",client_id:u.a.GEN.templateConst.settings.GPLUS_CLIENT_ID,app_package_name:u.a.GEN.templateConst.settings.GPLUS_APP_PACKAGE_NAME,access_type:"offline",cookie_policy:"single_host_origin"},f=function(e){return Object(l.a)("unauth_web.gapi_auth2_load.success"),e()},d=function(e){Object(l.a)("unauth_web.init_google.sdk.".concat(e))},h=function(){return new Promise(function(e,t){d("start"),window.gapi.auth2?(d("exists"),window.gapi.auth2.init(p).then(function(){return f(e)})):(d("load"),window.gapi.load("auth2",{callback:function(){d("load_success"),window.gapi.auth2.init(p).then(function(){return f(e)})},onerror:function(){d("load_error"),t()},timeout:15e3,ontimeout:function(){d("load_timeout"),t()}}))})},m=n("GrJN"),b=n("aqOH");function y(){}Object.assign(y.prototype,i.a),Object.assign(y.prototype,{connect:function(e,t){var o=this;(t=Object.assign({},{success:function(){},error:function(){},complete:function(){}},t)).rerequest_facebook_email?n.e("FacebookCommon").then(n.bind(null,"bWet")).then(function(e){e.default.ensureInit(function(e){e.login(function(e){var n,o,r=e.authResponse;r&&(n=(n=r.grantedScopes)?n.split(","):[],o=r.userID);var i=n.find(function(e){return"email"===e}),a={id:o};"connected"===e.status&&i?t.success(a):t.error(a),t.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},b.default)}):"gplus"===e?c.a.get(function(e){h().then(function(){e.auth2.getAuthInstance().grantOfflineAccess().then(function(e){t.success({one_time_code:e.code,redirect_uri:"postmessage"})}).catch(function(e){t.error(e)})})}):n.e("FacebookDialogCommon").then(n.bind(null,"H++a")).then(function(n){var r=n.default,i=t.windowOptions||r.getWindowOptions(),c=window.open("/connect/"+e+"/","",i);if(!c)return a.default.showError(s.a._("You must enable popups!")),void t.error({network:e,alertedUpstream:!0});var u=m.a.setInterval(function(){c.closed&&(clearInterval(u),o.handleComplete({network:e,error_message:"Window closed."}))},1e3);o.once("connect:"+e,function(e){clearInterval(u),e.error_message?t.error(e):t.success(e),t.complete()})})},complete:function(e){this.handleComplete(e)},handleComplete:function(e){var t="connect:"+e.network;if("facebook"===e.network){var n=e.id;n&&"string"!=typeof n&&(e.error_message="Facebook id must be of string type")}this.trigger(t,e)}}),Object.assign(y,{instance:function(){return o||(o=new y),o},FACEBOOK:"facebook",TWITTER:"twitter",GOOGLE:"google",YOUTUBE:"youtube",GPLUS:"gplus",MICROSOFT:"microsoft",ETSY:"etsy"}),window.addEventListener("message",function(e){var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&y.instance().complete(e.data)});t.a=y},"VEO/":function(e,t,n){},c61H:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n("GyhR"),r=n.n(o),i=n("Ivf5"),a=n("H3Xe"),c=function(e){return{isLimitedLogin:e.viewer.isLimitedLogin,isAuth:e.viewer.isAuth}};function s(e){var t=function(t){var n=t.dispatch,o=t.isAuth,i=t.isLimitedLogin,c=!o||i?function(e){return function(e){e&&e.stopPropagation(),n(a.a)}}:function(e){return e};return r.a.createElement(e,Object.assign({authAction:c},t))};return t.displayName="WithAuthenticatedAction(".concat(String(e.displayName||e.name),")"),Object(i.connect)(c)(t)}},ekcn:function(e,t,n){},"gf/F":function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n("GyhR"),r=(n("ekcn"),n("PNko")),i=n.n(r),a=n("Qo1m"),c=n("+U6O");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=32,m=13,b=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return o=this,r=(e=l(t)).call.apply(e,[this].concat(a)),n=!r||"object"!==s(r)&&"function"!=typeof r?f(o):r,d(f(f(n)),"handleKeyPress",function(e){e.charCode!==h&&e.charCode!==m||(e.preventDefault(),n.props.onClick(e))}),n}var n,r,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o["PureComponent"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.icon,r=e.iconOnly,s=e.onClick,u=e.saved,l=e.variant;return u?o.createElement(c.c,{disabled:!0,text:a.a._("Saved"),size:"sm"}):r?o.createElement("div",{"data-test-id":"SaveButton"},o.createElement(c.o,{accessibilityLabel:a.a._("Save","Accessibility label for the save button"),bgColor:"white",icon:"pin",onClick:function(e){var t=e.event;return s(t)},iconColor:"darkGray"})):o.createElement("div",{className:i()("SaveButton",t?"SaveButton--disabled":"SaveButton--enabled"),"data-test-id":"SaveButton",onClick:t?void 0:s,onKeyPress:t?void 0:this.handleKeyPress,role:"button",tabIndex:"0"},o.createElement("div",{className:i()("SaveButton__background",t?"SaveButton__background--disabled":"SaveButton__background--enabled",{"SaveButton__background--lego":"lego"===l})},o.createElement(c.b,{alignItems:"center",dangerouslySetInlineStyle:{__style:{minHeight:40,padding:"10px 14px"}},display:"flex"},n&&o.createElement(c.b,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}}},o.createElement(c.n,{accessibilityLabel:"",color:t?"gray":"white",icon:"pin",inline:!0,size:20})),o.createElement(c.K,{bold:!0,color:t?"gray":"white",size:"lego"===l?"sm":"md"},o.createElement("span",{className:i()("SaveButton__label",{"SaveButton__label--lego":"lego"===l})},a.a._("Save","Pin save button label"))))))}}])&&u(n.prototype,r),b&&u(n,b),t}();d(b,"defaultProps",{disabled:!1,icon:!0,variant:"classic"})},iz36:function(e,t,n){"use strict";var o=n("GyhR"),r=n.n(o),i=n("TXWX"),a=n.n(i),c=n("OtLr");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){return null},m=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return o=this,r=(e=l(t)).call.apply(e,[this].concat(a)),n=!r||"object"!==s(r)&&"function"!=typeof r?f(o):r,d(f(f(n)),"view",function(e){var t=e.placement_id,o=e.experience_id;n.props.experienceClient.viewExperience(t,o)}),d(f(f(n)),"complete",function(e){var t=e.placement_id,o=e.experience_id,r=n.props,i=r.experienceClient,a=r.preventRemoval;a?i.completeExperience(t,o,a):i.completeExperience(t,o)}),d(f(f(n)),"dismiss",function(e){var t=e.placement_id,o=e.experience_id,r=n.props,i=r.experienceClient,a=r.preventRemoval;a?i.dismissExperience(t,o,a):i.dismissExperience(t,o)}),n}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){if(!this.props.disableAutoView){var e=this.getExperience(this.props);e&&this.shouldRenderExperience(e)&&this.view(e)}}},{key:"componentDidUpdate",value:function(e,t){if(!this.props.disableAutoView){var n=this.getExperience(e),o=this.getExperience(this.props);o&&this.shouldRenderExperience(o)&&(n&&n.experience_id===o.experience_id||this.view(o))}}},{key:"getExperience",value:function(e){return e.experienceClient.experienceForPlacement}},{key:"shouldRenderExperience",value:function(e){if(e){var t=e.type,n=e.experience_id;if(this.props.experienceIds&&this.props.experienceIds.includes(n))return!0;if(!this.props.experienceIds){if(this.props.type&&this.props.type===t)return!0;if(this.props.transitionType&&this.props.transitionType===t)return!0}}return!1}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,o=t.disableAutoView,i=this.getExperience(this.props);if(i&&this.shouldRenderExperience(i)&&n){if(a()(n)){var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){d(e,t,n[t])})}return e}({},i,{complete:function(){return e.complete(i)},dismiss:function(){return e.dismiss(i)}});return o&&(c.view=function(){return e.view(i)}),n(c)}return r.a.Children.only(n)}return r.a.createElement(h,null)}}])&&u(n.prototype,i),c&&u(n,c),t}();t.a=Object(c.a)(m)},mpDz:function(e,t,n){"use strict";function o(e){return{type:"SHOW_REPIN_ANIMATION",payload:{pinId:e}}}function r(){return{type:"HIDE_REPIN_ANIMATION"}}function i(e){return{type:"SET_NUX_ANIMATION_ELEMENT",payload:{nuxAnimationElements:e}}}n.d(t,"c",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},odTJ:function(e,t,n){"use strict";n.r(t),n.d(t,"PinSaveButton",function(){return k});var o=n("GyhR"),r=n.n(o),i=n("Ivf5"),a=(n("VEO/"),n("Qo1m")),c=n("dsfX"),s=n("hvnN"),u=n.n(s),l=n("fifU"),p=n("gf/F"),f=n("c61H"),d=n("iN5V"),h=n("FGWo"),m=n("+U6O"),b=n("9Y9K"),y=n("kR61"),v=n("RTyF"),g=n("lixz"),_=n("JsRk"),w=n("Kqiz");function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=Object(o.lazy)(function(){return n.e("FirstPinCreateCommon").then(n.bind(null,"N0nc"))}),R=[500639,11022],k=function(e){function t(e,n){var o,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,a=P(t).call(this,e,n),o=!a||"object"!==S(a)&&"function"!=typeof a?E(i):a,j(E(E(o)),"componentWillUnmount",function(){o._repinCompletionPromise&&o._repinCompletionPromise.cancel()}),j(E(E(o)),"setCompletionPromise",function(e){o._repinCompletionPromise=e,o._repinCompletionPromise.promise.then(function(){o.handleRepinHideAndToggle()})}),j(E(E(o)),"_repinCompletionPromise",null),j(E(E(o)),"isInShareCallback",!1),j(E(E(o)),"handleRepinHide",function(){o.setState({isRepinModalOpen:!1})}),j(E(E(o)),"handleRepinHideAndToggle",function(){o.setState({isRepinModalOpen:!1});var e=o.props.onToggleModal;e&&e(!1)}),j(E(E(o)),"handleSaveButtonClick",o.props.authAction(function(e){e&&(e.preventDefault(),e.stopPropagation());var t=o.props,n=t.onClickCallback,r=t.onToggleModal,i=t.oneTapSave;n&&n(),i?i.saved||"function"!=typeof i.save||i.save():(Object(g.e)(16),r&&r(!0),o.setState({isRepinModalOpen:o.props.isAuth}))})),j(E(E(o)),"handleShareCallback",function(){var e=o.props.onShareCallback;o.isInShareCallback=!0,e&&e()}),j(E(E(o)),"saveButtonRef",r.a.createRef()),j(E(E(o)),"renderPinToBoardRepin",function(){var e=o.props,t=e.onToggleModal,n=e.pin,i=o.state,a=i.isFPE,c=i.isRepinModalOpen;return c&&a?o.renderFPE():a?null:r.a.createElement(v.b,{action:"repin",additionalCreateFields:{is_stl_pin:Object(y.c)(n)},onClose:o.handleRepinHide,setCompletionPromise:o.setCompletionPromise,shouldShowToast:!0,onToggleModal:t,pin:n},function(e){var i=e.dismissModal,a=e.displaySuccessAnimation,s=e.handleAbort,u=e.handleNewBoardAnimationCompletion,l=e.handleSocialConnectSet,p=e.handleSaveToBoard,f=e.newPin,d=e.updateDescription,h=e.showSharingUpsell,m=e.modalTitle,b=e.setModalTitle;return r.a.createElement(w.b,{dismissModal:i,displaySuccessAnimation:a,handleSocialConnectSet:l,handleSaveToBoard:p,anchorRef:o.saveButtonRef.current,handleAbort:s,handleNewBoardAnimationCompletion:u,newPin:f,newsId:o.props.newsId,isCloseupPin:o.props.isCloseupPin,isInModal:!0,onCloseAndShare:o.handleShareCallback,onToggleModal:t,pin:n,pwtAuxData:{pin_create_method:"repin"},modalTitle:m,setModalTitle:b,shouldRenderContent:c,updateDescription:d,showSharingUpsell:h})})});var c=e.experience;return o.state={isFPE:!!c&&R.includes(c.experience_id),isRepinModalOpen:e.showRepinOnInitialRender||!1,savedPin:{id:""}},o}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,o["Component"]),n=t,(i=[{key:"shouldComponentUpdate",value:function(e,t){return!this.isFPERemoved(e)}},{key:"isFPERemoved",value:function(e){var t=this.state.isFPE,n=e.experience;return t&&(!n||!R.includes(n.experience_id))}},{key:"renderFPE",value:function(){var e=this.props,t=e.completePinSave,n=e.experience,o=e.pin;return r.a.createElement(c.b,{accessibilityCloseLabel:a.a._("Close","Accessible close create board education label"),accessibilityModalLabel:a.a._("Create board","Accessible create board education modal label"),footer:r.a.createElement("div",{className:"FirstBoardCreate__education"},a.a._("Boards are where you save your Pins","Text explaining that boards are used to collect and save pins")),heading:a.a._("Create board","Create board education modal label"),onDismiss:this.handleRepinHideAndToggle,size:"lg"},r.a.createElement(l.a,null,r.a.createElement(T,{anchorRef:this.saveButtonRef.current,experience:n,isInModal:!0,onClose:this.handleRepinHideAndToggle,onComplete:t,pin:o,pwtAuxData:{pin_create_method:"repin"}})))}},{key:"render",value:function(){var e=this.props,t=e.anchorString,n=e.icon,o=e.iconOnly,i=e.oneTapSave,a=e.renderPinSaveTooltip,c=e.variant,s=Object(d.a)(t)(p.a);return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{ref:this.saveButtonRef},r.a.createElement(s,{icon:n,onClick:this.handleSaveButtonClick,saved:i&&"controlled"===i.type&&i.saved,iconOnly:o,isPulsarDisplayed:!this.state.isRepinModalOpen,variant:c}),this.renderPinToBoardRepin()),!!a&&this.saveButtonRef.current&&a(this.saveButtonRef.current))}}])&&O(n.prototype,i),s&&O(n,s),t}();j(k,"contextTypes",{language:u.a.string,userAgent:u.a.shape({browserName:u.a.string.isRequired}).isRequired}),j(k,"defaultProps",{anchorString:""});t.default=Object(b.compose)(f.a,_.withRouter,Object(h.a)(33),Object(i.connect)(function(e){return{isAuth:e.viewer.isAuth,email:e.viewer.isAuth?e.viewer.email:void 0}},function(e){return{completePinSave:function(){return e({type:"COMPLETE_PIN_SAVE"})}}}))(k)},tkA3:function(e,t,n){"use strict";var o=n("GGL+"),r=n.n(o),i=n("RPeA"),a=n("ePT2"),c=n("aqOH"),s=function(e){e=e||{},this.tags=e.tags,this.enable_recent_queries=!!e.enable_recent_queries,this.minimum_term_character_length=e.minimum_term_character_length||0,this.bypass_lru_cache=e.bypass_lru_cache;var t={tags:e.tags,pin:e.pin_id},n=e.num_places;n?t.num_places=n:t.count="count"in e?e.count:5,e.exclude_non_followers&&(t.exclude_non_followers=!0),e.field_set_key&&(t.field_set_key=e.field_set_key),e.pin_scope&&(t.pin_scope=e.pin_scope);var o="TypeaheadResource";e.resource_name&&(o=e.resource_name),this.searchResource=a.a.create(o,t),this.itemsCache=new i.a};Object.assign(s.prototype,r.a),Object.assign(s.prototype,{search:function(e,t){var n;if(!e&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&c.default.isLimitedLogin())return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&this.enable_recent_queries&&c.default&&c.default.isAuthenticated())n="recent_search";else{var o=this.bypass_lru_cache?{}:this.itemsCache.get(e);if(o){var r=o.items;if(r&&r.length){this.abortSearch();var i=o.hint;return void this.publishData(e,r,i,t)}}}e.length>=this.minimum_term_character_length?this.fetch(e,n,t):this.publishData(e,[],{},t)},getResource:function(){return this.searchResource},abortSearch:function(){this.getResource().abort()},publishData:function(e,t,n,o){var r={term:e,items:t,hint:n};this.trigger("data",r),o&&o(r)},setAutocompleteScope:function(e){this.getResource().set("autocompleteScope",e)},fetch:function(e,t,n){var o=this,r=this.getResource();if(r.isCalling()){var i=r.get("term");if(e===i)return;this.abortSearch()}""!==this.tags&&(r.set("term",e),r.set("tags",t||this.tags),r.resetBookmark(),r.callGet({showError:!1}).then(function(t){var r=t.resource_response.data,i=r.items,a=r.hint||{},c={hint:a,items:i};o.cacheData(e,c),o.publishData(e,i,a,n)},function(e){o.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm:function(e){this.itemsCache.remove(e)},cacheData:function(e,t){this.itemsCache.set(e,t)},prefetch:function(){this.warm||(a.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0)}}),t.a=s},vBbO:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n("GyhR"),r=(n("hvnN"),n("tkA3"));function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=new Array(a),p=0;p<a;p++)s[p]=arguments[p];return o=this,r=(e=c(t)).call.apply(e,[this].concat(s)),n=!r||"object"!==i(r)&&"function"!=typeof r?u(o):r,l(u(u(n)),"searchCache",Object.create(null)),l(u(u(n)),"lastSearchedQuery",null),l(u(u(n)),"search",function(e){n.lastSearchedQuery=e,e in n.searchCache?n.props.onTypeaheadSuggestionsChange(n.searchCache[e],e):n.provider.search(e,function(t){var o=t.items;n.searchCache[e]=o,e===n.lastSearchedQuery&&n.props.onTypeaheadSuggestionsChange(o,e)})}),n}var n,p,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,o["Component"]),n=t,(p=[{key:"componentDidMount",value:function(){var e=this.props.resourceOptions||{};this.provider=new r.a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){l(e,t,n[t])})}return e}({resource_name:this.props.resourceName},e));var t=this.props.value;null!=t&&this.props.allowSearchOnMount&&this.search(this.props.value)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;null!=t&&t!==this.props.value&&this.search(t)}},{key:"render",value:function(){return this.props.children||null}}])&&a(n.prototype,p),f&&a(n,f),t}();l(p,"defaultProps",{resourceName:"TypeaheadResource"})}}]);
//# sourceMappingURL=pjs-PinFeedbackPageDesktop~PinSaveButtonCommon-3d41dc6a80626acaa196.js.map
