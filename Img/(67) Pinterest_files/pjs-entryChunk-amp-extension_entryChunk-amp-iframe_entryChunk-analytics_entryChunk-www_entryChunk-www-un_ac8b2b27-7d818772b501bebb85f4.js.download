(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["entryChunk-amp-extension~entryChunk-amp-iframe~entryChunk-analytics~entryChunk-www~entryChunk-www-un~ac8b2b27","errorUtilCommon"],{H3Xe:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return a});var n={type:"OPEN_LOGIN_MODAL"},o=function(e){return{openLoginModal:function(){return e(n)}}},a=function(e){return{isFullAuth:e.viewer.isAuth&&!e.viewer.isLimitedLogin}}},POeB:function(e,t,r){"use strict";r.r(t);var n=r("9YBT"),o=r.n(n),a=r("/YZq"),i=a.a.getLogger("errorUtil"),s={};s.reportError=function(e,t,n,o){r.e("stacktraceLibrary").then(r.t.bind(null,"j+79",7)).then(function(r){var a=r.default,s={fn_name:t||"unknown_function_name"};if(e instanceof Object&&void 0!==e.getErrorData&&Object.assign(s,e.getErrorData(t)),n[0]&&function(e){return Object.keys(e).some(function(e){return e.includes("jQuery")})}(n[0])){var u=n[0],l=u.currentTarget;s.event={type:u.type,target_class:l.className.replace(/\s+/g," ")},l.href&&(s.event.target_href=l.href)}s.traceback=a({e:o}).join("\n"),i.error(o.message,s)})},s._showErrorCallback=s._showErrorCallback||null,s.setShowHtmlErrorCallback=function(e){s._showErrorCallback=e},s.showError=function(e,t,r){var n=o()(e);return s.showHtmlError(n,t,r)},s.showHtmlError=function(e,t,r){return s._showErrorCallback(e,t,r)},s.NoEmailProvidedError=function(){},s.NoEmailProvidedError.prototype=new Error,t.default=s},h90Z:function(e,t,r){"use strict";var n=r("MIQL"),o=r("XQD6"),a=r("oFGA"),i=r("KHqo"),s=r("6Kma"),u=r("POeB"),l=r("1Jqd"),c=r("Qo1m"),f=r("Q6EP"),h=r.n(f),p=r("/YZq"),g=r("yxuo"),_=r("r0wG"),d=r.n(_),k=r("2EPj"),m=r.n(k),v=r("CYq4"),b=r.n(v),y=r("4+0X"),E=r("8Pp4"),w=r.n(E),C=r("8MjP");var O=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resource_response={data:null,error:null},this.client_context=null,this.moduleTree=null,this.page_info=null,this.request_identifier=""},x={fromPlainObject:function(e){var t=new O;t.client_context=e.client_context,t.page_info=e.page_info,t.request_identifier=e.request_identifier;var r=e.resource;r&&r.options&&(t.bookmarks=r.options.bookmarks||["-end-"]);var n=e.resource_response.data;t.resource_response.data=n;var o=e.resource_response.error;return t.resource_response.error=o?s.a.fromPlainObject(o,n):null,t}},S=r("sf5y"),T=r("ptua"),P=r("GrJN"),L=r("q579"),j=r("aqOH"),D=r("Kswq"),H=r("Dk0+"),q=r("H3Xe"),U=r("yINQ");function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var R=p.a.getLogger("PureReactResource"),B=function(){function e(t,r){var n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=null,(o="abortCallback")in(n=this)?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,this.name=t,this.options=r?D.a.deepCopy(r):{}}var t,r,f;return t=e,(r=[{key:"getClientToServerKeys",value:function(e){var t=[];return e.DEBUG&&t.push("is_test_mode","request_debug"),e.IS_TEST_MODE||t.push("advertiser"),t}},{key:"getName",value:function(){return this.name}},{key:"setOptions",value:function(e){this.options=e}},{key:"set",value:function(e,t){this.options[e]=t}},{key:"get",value:function(e){return this.options[e]||null}},{key:"copyOptions",value:function(e){var t=D.a.deepCopy(this.options);return t&&e&&delete t.bookmarks,t}},{key:"callGet",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.options,a=o.logNetworkTimer,i=o.loggerComponentName,s=a?(new U.a).start():null;if(e&&e.tracingParams){var u=e.tracingParams,l=u.traceId,c=void 0===l?null:l,f=u.spanId,h=void 0===f?null:f;c&&(n["X-B3-TraceId"]=c.toString(16),n["X-B3-SpanId"]=h&&h.toString(16)||w()().toString(16))}return H.b&&(n["X-B3-Flags"]="1"),this.call("get",e,t,n).then(function(e){return s&&(s.end(),g.default.logToServer(g.default.SERVER_LOG_TYPE.NETWORK_LOAD,g.default.HTTP_METHOD.POST,{timing:s.getCompletedTime(),component:i||r.name})),e})}},{key:"callCreate",value:function(e,t,r){return this.call("create",e,t,r)}},{key:"callUpdate",value:function(e,t,r){return this.call("update",e,t,r)}},{key:"callDelete",value:function(e,t,r){return this.call("delete",e,t,r)}},{key:"_isUrlShortEnoughForHttpGet",value:function(e,t){return(e+"?"+L.a.getQueryStringFromObject(t)).length<=2e3}},{key:"call",value:function(e,t,r,n){var o=this,a=!t||void 0===t.async||t.async,i=t&&t.timeout||null,s=this._call(e,a,i,r,n);return s.then(function(e){o.onResponseSuccess(e)},function(e){o.onResponseError(e)}),s.then(void 0,function(e){if(e&&19===e.api_error_code&&j.default.isWriteBanned())console.error("User is write banned");else if(t&&t.showError){u.default.showError(e.message,null,void 0)}}),s}},{key:"getResourceUrl",value:function(e,t){return"/resource/".concat(e,"/").concat(t,"/")}},{key:"_call",value:function(e,t,r,n,o){var i=this;this.abort();var s=1;"get"===e&&(s=1);var u=1e3,c={options:this.options,context:b()(a.a.instance,this.getClientToServerKeys(m.a))},f=this.getResourceUrl(this.name,e);n&&(s=n.retries||s,u=n.retryAfter||u);var h={source_url:L.a.getCurrentUrl(),data:JSON.stringify(c)},p=S.a.getActiveTarget();p&&(h.module_path=p.getFullName());var g="get"===e&&this._isUrlShortEnoughForHttpGet(f,h),_={"X-Pinterest-AppState":l.a.windowIsInFocus?"active":"background"};return a.a.instance.experiment_hash&&(_["X-Pinterest-ExperimentHash"]=a.a.instance.experiment_hash),Object.assign(_,o),new Promise(function(e,n){var o=null,a={cache:!1,url:f,async:t,data:h,dataType:"json",headers:_,timeout:r,type:g?"GET":"POST"},l={url:f,requestData:h,resourceDict:c},p=function t(){(s-=1)<0?n(o):i._createXhr(l,a,function(t){return e(t)},function(e,r){r?n(e):(o=e,t.again())})};p.again=function(){P.a.setTimeout(p,u)},p.start=function(){p()},p.start()})}},{key:"_createXhr",value:function(e,t,r,a){var u=this,l=null,f=e.url,h=e.resourceDict;t.error=function(e){var t=e.statusText,r=e.errorMessage;l=r,"abort"===t&&a("Resource call aborted",!0)},t.complete=function(e){e.ok||(l=e.errorMessage);var t=e.httpResponse,n=t.status,p=t.json,g=t.text,_=t.getResponseHeader,d=t.getResponseHeadersString;p().then(function(e){var t=x.fromPlainObject(e);return t.originHost=_("pinterest-generated-by")||void 0,{response:t,error:t.resource_response.error}}).catch(function(t){g().then(function(r){R.error("Failed to parse resource response. HTTP "+n,t.message,{resource_name:u.name,response_headers:d(),http_status:n,text_status:e.ok?"success":"error",response_text:r,error_thrown:l,xhrUrl:f,userAgent:null,payload:null})});var r=new s.a;return r.message=c.a.commonStrings.defaultErrorMessage,r.original_message=t.message,r.http_status=n,{error:r}}).then(function(e){if(!e.error)return r(e.response),void(u.abortCallback=null);var t=e.error;if(403!==t.http_status||j.default.isAuthenticated()){if(401===t.http_status&&j.default.isLimitedLogin()&&!(h&&h.options&&h.options.disable_auth_failure_redirect))return T.a.instance&&"UserSessionResource"!==u.name&&T.a.instance.dispatch(q.a),void a(t);e.response&&e.response.moduleTree?r(e.response):a(t),u.abortCallback=null}else{var n=L.a.getCurrentUrl(),s=L.a.getQueryStringParamsFromUrl(n);n.startsWith("/login")&&s.next?(i.default.cleanUpCookie(),i.default.clearSecondCookie()):Object(o.a)(L.a.getLoginUrl(),!1)}})},this.abortCallback=Object(n.a)(t)}},{key:"abort",value:function(){this.abortCallback&&(this.abortCallback(),this.abortCallback=null)}},{key:"resetBookmark",value:function(){this.options&&delete this.options.bookmarks}},{key:"setBookmarks",value:function(e){this.set("bookmarks",e)}},{key:"getLatestBookmark",value:function(){var e=this.options.bookmarks;return e?e[e.length-1]:void 0}},{key:"atEnd",value:function(){return"-end-"===this.getLatestBookmark()}},{key:"onResponseSuccess",value:function(e){if(e.client_context){y.a.instance.publish("site","appVersion",{version:e.client_context.app_version,originHost:e.originHost});var t=e.client_context.event_log_info;t&&y.a.instance.publish("contextLogging","contextLogPlainObject",t);var r=e.client_context.placed_experiences;r&&y.a.instance.publish("site","placedExperiencesFromServer",r);var n=e.client_context,o=n.triggerable_experiments,i=n.experiment_hash;i!==a.a.instance.experiment_hash&&(e.client_context.triggerable_experiments=o,e.client_context.experiment_hash=i)}var s=a.a.instance._uid;e.client_context&&a.a.set(e.client_context),s&&(a.a.instance._uid=s),e.page_info&&(e.page_info.title||Object.keys(e.page_info.meta).length)&&y.a.instance.publish("site","pageInfo",e.page_info),e.bookmarks&&this.setBookmarks(e.bookmarks),y.a.instance.publish("request","requestIdentifier",e.request_identifier)}},{key:"onResponseError",value:function(e){R.debug("Request error for "+this.name,e,e.stack_trace)}},{key:"getErrorData",value:function(e){return{resource_name:this.name}}},{key:"isEqual",value:function(e,t){if(this.name!==e.name)return!1;var r=d()(this.options,["bookmarks"]),n=d()(e.options,["bookmarks"]);if(t){r.latest_bookmark=this.getLatestBookmark();var o=e.options.bookmarks;n.latest_bookmark=o&&o[o.length-1]}return h()(r,n)}},{key:"toString",value:function(){var e=d()(this.options,["bookmarks","field_set_key"]);return this.name+"("+L.a.toScrubbedArgumentString(e)+")"}},{key:"isCalling",value:function(){return!!this.abortCallback}}])&&A(t.prototype,r),f&&A(t,f),e}();C.default.setDefaultConstructorFn(B)}}]);
//# sourceMappingURL=pjs-entryChunk-amp-extension~entryChunk-amp-iframe~entryChunk-analytics~entryChunk-www~entryChunk-www-un~ac8b2b27-7d818772b501bebb85f4.js.map
