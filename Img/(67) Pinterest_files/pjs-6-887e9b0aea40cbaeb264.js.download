(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[6],{"19Gw":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n("GyhR"),o=n.n(r),i=n("Qo1m"),a=n("yXM0"),l=n("z/1d"),s=n("+U6O");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=function(e){function t(){var e,n,r,o,a,l,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,p=new Array(u),m=0;m<u;m++)p[m]=arguments[m];return r=this,n=!(o=(e=d(t)).call.apply(e,[this].concat(p)))||"object"!==c(o)&&"function"!=typeof o?f(r):o,a=f(f(n)),l="statsList",s=n.props.isVideo?[{iconType:"play",displayText:i.a._("Video views","Label for views of a video pin on closeup page"),field:"video_views",align:"start"},{iconType:"clock",displayText:i.a._("Avg. time","Label for average time of a video pin on closeup page"),field:"video_average_time",align:"center",valueFormat:"TIME"},{iconType:"angled-pin",displayText:i.a._("Saves","Label for saves of a video pin on closeup page"),field:"save",align:"end"}]:[{iconType:"eye",displayText:i.a._("Impressions","Label for impressions of a pin on closeup page"),field:"impression",align:"start"},{iconType:"angled-pin",displayText:i.a._("Saves","Label for saves of a pin on closeup page"),field:"save",align:"center"},{iconType:"arrow-up-right",displayText:i.a._("Link clicks","Label for click-throughs of a pin on closeup page"),field:"clickthrough",iconSize:10,align:"end"}],l in a?Object.defineProperty(a,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[l]=s,n}var n,m,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(m=[{key:"renderValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"COUNT";return Number.isInteger(e)?"TIME"===t?Object(a.a)(e):o.a.createElement(l.a,{value:e,shortform:!0,shortformMaximumFractionDigits:1}):"-"}},{key:"render",value:function(){var e=this,t=this.props,n=t.isVideo,r=t.stats,i=t.isStoryPin,a=t.show90Days;if(!r)return null;var l=a?"90d":"30d",c=(n||i)&&r.all_time?r.all_time:r[l];return c&&0!==Object.keys(c).length?o.a.createElement(s.b,{display:"flex"},this.statsList.map(function(t,n){var r=t.align,i=t.iconType,a=t.iconSize,l=void 0===a?12:a,u=t.field,d=t.displayText,p=t.valueFormat;return o.a.createElement(s.b,{key:n,column:4,display:"flex",justifyContent:r,alignItems:"center"},o.a.createElement(s.b,{display:"inlineBlock",marginRight:1},o.a.createElement(s.n,{accessibilityLabel:d,color:"darkGray",icon:i,size:l})),o.a.createElement(s.K,{inline:!0,size:"sm"},e.renderValue(c[u],p)))})):null}}])&&u(n.prototype,m),h&&u(n,h),t}()},E1Qe:function(e,t,n){"use strict";var r=n("hvnN"),o=n.n(r);t.a=o.a.shape({access:o.a.arrayOf(o.a.string),ad_match_reason:o.a.number,aggregated_pin_data:o.a.shape({aggregated_stats:o.a.shape({done:o.a.number,likes:o.a.number,saves:o.a.number}),pin_tags:o.a.arrayOf(o.a.shape({pin_tag_key:o.a.string.isRequired,x_percent:o.a.number.isRequired,y_percent:o.a.number.isRequired}))}),attribution:o.a.shape({embed:o.a.shape({src:o.a.string})}),board:o.a.shape({followed_by_me:o.a.bool,id:o.a.string,url:o.a.string,name:o.a.string}),buyable_product:o.a.shape({display_active_max_price:o.a.string,display_active_min_price:o.a.string,short_description:o.a.string,title:o.a.string}),debug_info_html:o.a.string,description:o.a.string,domain:o.a.string,dominant_color:o.a.string,done_by_me:o.a.bool,embed:o.a.shape({src:o.a.string,type:o.a.string}),id:o.a.string,images:o.a.shape({"236x":o.a.shape({url:o.a.string,height:o.a.number}),"474x":o.a.shape({url:o.a.string,height:o.a.number})}),image_signature:o.a.string,is_quick_promotable:o.a.bool,is_eligible_for_web_closeup:o.a.bool,is_native:o.a.bool,link:o.a.string,native_creator:o.a.shape({username:o.a.string,full_name:o.a.string,id:o.a.string,image_small_url:o.a.string}),per_pin_analytics:o.a.shape({clickthrough:o.a.number,closeup:o.a.number,id:o.a.string,impression:o.a.number,repin:o.a.number,total_engagement:o.a.number,type:o.a.string}),pinner:o.a.shape({explicitly_followed_by_me:o.a.bool,full_name:o.a.string,id:o.a.string,image_small_url:o.a.string}),promoter:o.a.shape({username:o.a.string,full_name:o.a.string,image_small_url:o.a.string}),recommendationReason:o.a.shape({reason:o.a.string,board:o.a.shape({id:o.a.string,name:o.a.string,url:o.a.string}),interest:o.a.shape({id:o.a.string}),pin:o.a.shape({id:o.a.string})}),repin_count:o.a.number,rich_summary:o.a.shape({display_name:o.a.string}),source_interest:o.a.shape({name:o.a.string,url_name:o.a.string,id:o.a.string}),tracked_link:o.a.string,title:o.a.string,type:o.a.string,videos:o.a.shape({}),saved:o.a.bool})},EQo2:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("IqQH"),a=n("PNko"),l=n.n(a),s=n("/Mjl"),c=n("+U6O");function u(e){var t=e.onError,n=e.onLoad,r=e.pin,i=r.title,a=void 0===i?"":i,l=r.dominant_color,u=r.images,d=void 0===u?{}:u,p="".concat(16/9*100,"%"),f=d["236x"].width>d["236x"].height?d["736x"]:d["236x"];return o.a.createElement(c.b,{position:"relative",dangerouslySetInlineStyle:{__style:{paddingTop:p}}},o.a.createElement(c.b,{position:"absolute",top:!0,left:!0,width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{zIndex:s.a.storyPinImage}}},o.a.createElement(c.p,{alt:a,color:l,naturalHeight:f.height,naturalWidth:f.width,onError:t,onLoad:n,src:f.url,fit:"cover"})))}var d=n("UmN8");t.a=function(e){var t,n,r,a,s=e.highResOnly,p=e.lowResOnly,f=e.onError,m=e.onLoad,h=e.pin,b=e.saved,y=void 0!==b&&b,g=h.carousel_data,v=h.description,w=void 0===v?"":v,_=h.dominant_color,E=h.id,O=h.images;if(g)return o.a.createElement(i.a,{onError:f,onLoad:m,highResOnly:s,lowResOnly:p,pinId:E});if(O){var P=s&&(O["736x"]||O.orig||O["474x"])||O["236x"];r=P.height,a=P.width,t=P.url,n=p||s?"".concat(P.url," 1x"):["".concat(O["236x"].url," 1x"),O["474x"]&&"".concat(O["474x"].url," 2x"),O["736x"]&&"".concat(O["736x"].url," 3x"),O.orig&&"".concat(O.orig.url," 4x")].filter(Boolean).join(", ")}return o.a.createElement(c.b,{minHeight:120,display:"flex",alignItems:"center"},o.a.createElement(c.b,{flex:"grow"},o.a.createElement("div",{className:l()({savedGradient:y})},o.a.createElement(d.a,{name:"web_creators_story_pin_display",activate:!0,isEligible:!!h.story_pin_data_id},function(e){return e.anyEnabled?o.a.createElement(u,{pin:h,onError:f,onLoad:m}):o.a.createElement(c.p,{alt:w,color:_,naturalHeight:r,naturalWidth:a,onError:f,onLoad:m,src:t,srcSet:n})}))))}},FSbA:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u});var r,o=n("ePT2"),i=n("NoZx");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(a(r={},i.a.BOARD_ACTIVITY,"BoardActivityReactionResource"),a(r,i.a.BOARD_ACTIVITY_COMMENT,"BoardActivityCommentReactionResource"),r);function s(e,t){return{type:"ACTIVITY_ITEM_UPDATE_REACTION_COUNT",payload:{id:e,increment:t,reactionType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}}}function c(e,t,n){return function(r){var l=i.c[t],s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e}({activityId:e},n);return o.a.create(l,s).callUpdate().then(function(e){var t=e.resource_response.data;return r({type:"ACTIVITY_ITEM_UPDATED",payload:{data:t}}),t})}}function u(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return function(a){var c=l[n];if(!r&&i>0){a(s(e,!1,i)),a(s(e,!0,t));var u={activityId:e,reactionType:i},d=o.a.create(c,u),p={activityId:e,reactionType:t},f=o.a.create(c,p);d.callDelete({showError:!1}).then(function(){f.callCreate({showError:!1})})}else{var m={activityId:e,reactionType:t},h=o.a.create(c,m);r?h.callDelete({showError:!1}):h.callCreate({showError:!1}),a(s(e,!r,t))}}}},GB3e:function(e,t,n){},HW6o:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Mr4W"),a=n.n(i),l=n("4+0X");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=new Map,h=null,b=function(e){e.forEach(function(e){var t=m.get(e.target);t&&t(e)})},y=function(e,t,n){var r=t?[0,.5,1]:[0,1],o={root:document.querySelector("#mainContainer"),rootMargin:"-64px 0px 0px 0px",threshold:r};h=h||new window.IntersectionObserver(b,o),m.set(e,n),h.observe(e)},g=function(e){return m.has(e)};t.a=function(e){var t=function(t){function n(){var e,t,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var i=arguments.length,c=new Array(i),d=0;d<i;d++)c[d]=arguments[d];return r=this,o=(e=u(n)).call.apply(e,[this].concat(c)),t=!o||"object"!==s(o)&&"function"!=typeof o?p(r):o,f(p(p(t)),"seen",!1),f(p(p(t)),"flushTimeout",null),f(p(p(t)),"attachDenzelNavigateListener",function(){t.denzelNavigateListener=l.a.instance.subscribe("site","navigateStarted",function(e,n,r,o){var i=new RegExp("/pin/[\\w|-]+/$");!o&&r&&"string"==typeof r.url&&i.test(r.url)&&t.leave()})}),f(p(p(t)),"detachDenzelNavigateListener",function(){t.denzelNavigateListener&&(t.denzelNavigateListener.unsubscribe(),delete t.denzelNavigateListener)}),f(p(p(t)),"enter",function(e){var n=e.intersectionRatio>0||e.isIntersecting;t.seen=n,t.seen&&(t.props.onVisibilityChanged(!0),t.attachDenzelNavigateListener())}),f(p(p(t)),"leave",function(){var e=t._node;e&&g(e)&&t.seen&&(t.props.onVisibilityChanged(!1),t.seen=!1,t.detachDenzelNavigateListener())}),f(p(p(t)),"observe",function(){try{t._node=a.a.findDOMNode(p(p(t)))}catch(e){return}if(t._node){var e=t.props.inAdsDesktopVideoExperiment,n=t._node;y(n,e,function(r){if(m.has(n)){var o=e?r.intersectionRatio>=.5:r.intersectionRatio>0||r.isIntersecting,i=t.props.trackFullVisible?r.intersectionRatio>=1:o,a=t.props.trackFullVisible?0===r.intersectionRatio:!i;!t.seen&&i?t.enter(r):t.seen&&a&&t.leave()}})}}),t}var i,b,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,r.Component),i=n,(b=[{key:"componentDidMount",value:function(){this.observe()}},{key:"componentWillUnmount",value:function(){var e=this._node;e&&(this.leave(),function(e){h.unobserve(e),m.delete(e)}(e))}},{key:"render",value:function(){return o.a.createElement(e,this.props)}}])&&c(i.prototype,b),v&&c(i,v),n}();return f(t,"displayName","WithVisibilityChanged(".concat(e.displayName||e.name,")")),t}},IqQH:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=n("CwDa"),l=n("+U6O");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return r=this,i=(e=u(t)).call.apply(e,[this].concat(c)),n=!i||"object"!==s(i)&&"function"!=typeof i?p(r):i,f(p(p(n)),"state",{showBadge:!0}),f(p(p(n)),"renderBadge",function(){var e=n.props,t=e.carousel_data,r=e.isCloseup,i=e.showCarouselBadge,a=n.state.showBadge,s=t.carousel_slots,c=t.index,u=a?.8:0;return!r&&i?o.a.createElement(l.b,{display:"flex",justifyContent:"center",alignItems:"center",color:"darkGray",position:"absolute",right:!0,height:35,width:35,marginRight:5,marginTop:5,shape:"rounded",dangerouslySetInlineStyle:{__style:{zIndex:1,opacity:u,transition:"opacity .3s"}}},o.a.createElement(l.K,{color:"white",size:"md"},"".concat(c+1,"/").concat(s.length))):null}),n}var n,i,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){var e=this;this.hideBadgeTimeout=setTimeout(function(){return e.setState({showBadge:!1})},3e3)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state.showBadge,r=e.carousel_data.index,o=this.props.carousel_data.index;n&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.hideBadgeTimeout=setTimeout(function(){return t.setState({showBadge:!1})},3e3)),r!==o&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.setState({showBadge:!0}))}},{key:"componentWillUnmount",value:function(){this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout)}},{key:"render",value:function(){var e,t=this.props,n=t.isCloseup,r=t.carouselIndex,i=t.closeupHeight,s=t.closeupWidth,c=void 0===s?0:s,u=t.carousel_data,d=t.highResOnly,p=t.lowResOnly,f=t.onError,m=t.onLoad,h=t.pinId,b=t.isEditMode,y=u.carousel_slots,g=void 0===y?[]:y,v=u.index,w=void 0!==r?r:v;return e=n?c:d?474:236,o.a.createElement(l.b,{height:i||"100%",width:e,overflow:"hidden"},!b&&this.renderBadge(),o.a.createElement(a.a,{trackCarousel:!0,key:"carousel-impression-key-".concat(w),impressionType:"Pin",loggingId:h,slotIndex:v,viewParameter:72,viewType:1},o.a.createElement(l.b,{position:"absolute",height:i||"100%",width:e,overflow:"hidden"})),o.a.createElement(l.b,{width:e*g.length,dangerouslySetInlineStyle:{__style:{left:w*e*-1+"px",transition:"left .3s"}},left:!0,height:"100%",display:"flex",direction:"row",position:"relative"},g.map(function(e,t){return function(e,t,n,r,i,a,s,c,u,d){var p,f,m,h,b=e.images,y=e.details,g=void 0===y?"":y;return c?(p=u||0,f=d||0,m=b&&b["564x"].url):r?(p=474,f=b&&Math.min(p/.8,p/(b["564x"].width/b["564x"].height)),m=b&&b["564x"].url):(f=b&&b["236x"].height,p=b&&b["236x"].width,m=b&&b["236x"].url),h=i?"".concat(b["236x"].url," 1x"):r?"".concat(b["564x"].url," 1x"):[b["474x"]&&"".concat(b["474x"].url," 2x"),b["736x"]&&"".concat(b["736x"].url," 3x"),b.orig&&"".concat(b.orig.url," 4x")].filter(Boolean).join(", "),o.a.createElement(l.b,{key:"carousel slot ".concat(t+n),height:f,width:p},o.a.createElement(l.p,{alt:g||"carousel image ".concat(n),naturalHeight:f,naturalWidth:p,onError:a,onLoad:s,src:m,srcSet:h}))}(e,h,t,d,p,f,m,n,c,i)})))}}])&&c(n.prototype,i),m&&c(n,m),t}();f(m,"defaultProps",{showCarouselBadge:!0});t.a=Object(i.connect)(function(e,t){var n=e.pins,r=t.pinId;return{carousel_data:n[r]&&n[r].carousel_data}})(m)},"JU/q":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="favorited"},VI9K:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r=function(e){return{type:"MOST_RECENT_PIN",payload:{id:e}}},o=function(e){return{type:"MOST_RECENT_PLP",payload:{image_signature:e}}}},VPPQ:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("+U6O");function a(e){var t=e.accessibilityLabel;return o.a.createElement(i.b,{display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(i.G,{accessibilityLabel:t,show:!0}))}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p=function(e){function t(){var e,n,r,o,i,a,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,p=new Array(u),f=0;f<u;f++)p[f]=arguments[f];return r=this,n=!(o=(e=c(t)).call.apply(e,[this].concat(p)))||"object"!==l(o)&&"function"!=typeof o?d(r):o,i=d(d(n)),s={LoadedComponent:null},(a="state")in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.props.loader().then(function(t){e._isMounted&&t.default!==e.state.LoadedComponent&&e.setState({LoadedComponent:t.default})})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;e.loader!==this.props.loader&&(e.loader().then(function(e){t._isMounted&&e.default!==t.state.LoadedComponent&&t.setState({LoadedComponent:e.default})}),this.setState({LoadedComponent:null}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.props.children,t=this.state.LoadedComponent;return t?e(t):this.props.showSpinner?r.createElement(a,{accessibilityLabel:this.props.spinnerLabel}):this.props.fallback||null}}])&&s(n.prototype,o),i&&s(n,i),t}();t.a=p},"Ww6/":function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=(n("GB3e"),n("Fpqi")),l=n("PNko"),s=n.n(l),c=n("/Mjl"),u=n("+U6O");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t=e.debugImpressionStarted,n=e.debugImpressionLogged,o=e.slotIndex,i=n||t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e}({},n&&!t?{opacity:.1}:{},t?{backgroundColor:"#adebad"}:{},{height:"100%",width:"100%"}):null;return r.createElement("div",{style:i},(t||n)&&r.createElement(u.b,{position:"absolute",padding:2,color:"darkGray",dangerouslySetInlineStyle:{__style:{zIndex:c.a.debugPinImpressions}}},r.createElement(u.K,{size:"xl",color:"white"},o)),e.children)}var f=n("Uc2O"),m=n("m2OL"),h=n("UgxU"),b=n("rSK6"),y=n("Qo1m"),g=n("E56J"),v=n("exzK"),w=n("VPPQ"),_=n("iJ35"),E=function(e){var t=e.pinId,n=e.sourceUrl,o=e.domain,i=e.onClick,a=e.bgColor,l=e.size,s=e.iconColor;return n?r.createElement(_.b,{external:!0,onClick:i,pinId:t,stopPropagation:!0,to:n},r.createElement(u.o,{bgColor:a,icon:"arrow-up-right",accessibilityLabel:o,size:l,iconColor:s})):null},O=n("hvnN"),P=n.n(O),T=n("fifU"),S=n("Mce2"),x=n("s3m5"),k=n("NoZx"),C=n("buVl"),I=n("nI4G"),j=n("k9eC"),L=n("lixz"),R=n("NmcB"),D=80,B="â€¦";function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){M(e,t,n[t])})}return e}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=23,W=15,G=function(e){function t(){var e,n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return o=this,i=(e=H(t)).call.apply(e,[this].concat(l)),n=!i||"object"!==A(i)&&"function"!=typeof i?U(o):i,M(U(U(n)),"state",{hovered:!1,focused:!1,active:!1}),M(U(U(n)),"handleFocus",function(){n.setState({focused:!0})}),M(U(U(n)),"handleMouseDown",function(){n.setState({active:!0})}),M(U(U(n)),"handleMouseUp",function(){n.setState({active:!1})}),M(U(U(n)),"handleMouseEnter",function(){n.setState({hovered:!0})}),M(U(U(n)),"handleMouseLeave",function(){n.setState({active:!1,hovered:!1})}),M(U(U(n)),"renderRightArrowClickthrough",function(){var e=n.props,t=e.backgroundColor,o=e.borderRadius,i=e.denseViewSelected,a=e.domain,l=e.textColor,s=e.maxHeight,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxLength,r=void 0===n?D:n,o=t.suffix,i=void 0===o?B:o;return e.length<=r?e:e.substring(0,r-1).replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,"")+i}(a,{maxLength:i?W:F});return r.createElement(u.b,{padding:2,color:t,display:"flex",justifyContent:"between",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderRadius:o}},maxHeight:s},r.createElement(u.b,{display:"flex",flex:"none"},r.createElement(u.n,{icon:"arrow-up-right",accessibilityLabel:y.a._("link","Website url link"),size:14,color:l})),r.createElement(u.b,{marginLeft:2,height:18,flex:"grow",overflow:"hidden"},r.createElement(u.K,{bold:!0,size:"sm",color:l,truncate:!0},c)))}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.borderRadius,n=e.bottom,o=e.hoverStyle,i=e.isEligibleForWebCloseup,a=e.onClick,l=e.pinId,s=e.position,c=e.sourceUrl,d=e.paddingX;if(!c)return null;var p=this.state.hovered||this.state.focused||this.state.active?o:{};return r.createElement(u.b,{position:s,bottom:n},r.createElement(u.b,{alignItems:"end",display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1,padding:2},r.createElement(u.b,{minWidth:0,paddingX:d},!i&&r.createElement(u.b,{position:"relative",dangerouslySetInlineStyle:{__style:z({borderRadius:t},p)},onFocus:this.handleFocus,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp},r.createElement(_.b,{external:!0,onClick:a,pinId:l,stopPropagation:!0,to:c},this.renderRightArrowClickthrough())))))}}])&&N(n.prototype,o),i&&N(n,i),t}();M(G,"defaultProps",{textColor:"darkGray",backgroundColor:"lightGray",borderRadius:4,position:"absolute",bottom:!0,hoverStyle:{},paddingX:1});var q=n("2YES"),K=n("FSbA"),Y=n("9Y9K"),Q=n("zBQm");function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ne(e,t,n[t])})}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=Object(r.lazy)(function(){return n.e("NuxOneClickSaveButtonCommon").then(n.bind(null,"/zC8"))}),oe=function(){return Promise.all([n.e(9),n.e(25),n.e(28),n.e("PinPersistentOneClickSaveCommon"),n.e("PersistentOneClickSaveCommon")]).then(n.bind(null,"d94/"))},ie=function(){return Promise.all([n.e(9),n.e(20),n.e(23),n.e(25),n.e(28),n.e(45),n.e(62),n.e("PinBetterSaveCommon")]).then(n.bind(null,"qoD0"))},ae=function(){return n.e("PinPromoteButtonCommon").then(n.bind(null,"Is9E"))},le=Object(r.lazy)(function(){return Promise.all([n.e(9),n.e(25),n.e(28),n.e("PinRepEditButtonCommon")]).then(n.bind(null,"24KF"))}),se=Object(r.lazy)(function(){return Promise.all([n.e(9),n.e(20),n.e(23),n.e("PinFeedbackPageDesktop~PinSaveButtonCommon"),n.e("PinSaveButtonCommon")]).then(n.bind(null,"odTJ"))}),ce=Object(r.lazy)(function(){return n.e("PinRepSendShareFlyoutButtonCommon").then(n.bind(null,"pi5b"))}),ue=function(e){var t=te({},e.style,{zIndex:c.a.pinActionWrapper});return o.a.createElement(u.b,Object.assign({},e,{dangerouslySetInlineStyle:{__style:t}}))};ue.defaultProps={style:{}};var de=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=this,o=(e=Z(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==X(o)&&"function"!=typeof o?ee(r):o,ne(ee(ee(n)),"onToggleFlyout",function(){var e=n.props,t=e.isFlyoutOpen;(0,e.onToggleFlyout)(!t)}),ne(ee(ee(n)),"handleOnSourceImageClick",function(){var e=n.props,t=e.imageSignature,r=e.requestContext,o=e.slotIndex;Object(L.e)(13),new j.c(r,"smb_pin_stats_from_business_profile").enabled(),n.handleClickLogging(35,{grid_index:o,image_signature:t})}),ne(ee(ee(n)),"handleToggleHover",function(e){n.props.onToggleFlyout(!1,e)}),ne(ee(ee(n)),"handleToggleSubmenu",function(e,t){n.props.onToggleFlyout(e,t,"save")}),ne(ee(ee(n)),"handleDropdownClose",function(){n.props.onToggleFlyout(!1)}),ne(ee(ee(n)),"handleClickthroughLogging",function(){var e=n.props,t=e.componentType,r=e.contextLogData,o=e.pin,i=e.slotIndex,a=e.viewType,l=e.viewParameter,s=o.id;Object(R.a)(12,te({},r,{view:a,viewParameter:l,component:t,objectId:s,grid_index:i})),n.handleClickLogging(162)}),ne(ee(ee(n)),"handleSaveButtonClick",function(){n.handleClickLogging(0),Object(I.b)("Lead",function(){g.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Repin Click"})})}),ne(ee(ee(n)),"handleLikeButtonClick",function(e){var t=e.event,r=n.props,o=r.boardActivity,i=r.toggleLike,a=r.isLikedByMe,l=r.pin,s=o&&o.id||l.id;t&&t.stopPropagation&&(t.stopPropagation(),i(s,1,k.a.BOARD_ACTIVITY,a))}),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,o.a.Component),n=t,(i=[{key:"getViewInfo",value:function(){var e=this.props,t=e.viewType,n=e.showEditPinButton,r=5===t,o=2===t,i=4===t;return{isBoardView:r,isSearchView:o,isProfileView:i,isOwnProfileView:i&&n,isOwnBoardView:(r||164===t)&&n,isOwnPinSearchView:o&&n}}},{key:"cropImageStyles",value:function(){var e=this.props,t=e.imageHeight,n=e.pin,r=e.truncatePinHeight,o={},i=n.story_pin_data_id;if(n.image_crop&&r&&!i&&(0!==n.image_crop.min_y||1!==n.image_crop.max_y)){var a=n.image_crop.min_y,l=n.image_crop.max_y;o={marginTop:a>0?-1*a*t+"px":"0px",marginBottom:l<1?Math.round(-1*(1-l)*t)+"px":"0px"}}return o}},{key:"handleClickLogging",value:function(e,t){var n=this.props,r=n.componentType,o=n.contextLogData,i=n.viewParameter,a=n.viewType,l=n.pin.id;Object(R.a)(101,te({},o,t,{component:r,view:a,viewParameter:i,element:e,objectId:l}))}},{key:"renderSendShareButton",value:function(e){var t=this,n=this.props,r=n.images,i=n.pin.id,a=n.viewType;return o.a.createElement(S.a,{id:"share-button"},o.a.createElement(T.a,null,o.a.createElement(ce,{imageSrc:r&&r["236x"].url,onClick:function(){return t.handleClickLogging(98)},onToggleFlyout:this.onToggleFlyout,onFlyoutDismiss:this.handleDropdownClose,pinId:i,sendType:"pin",shownWithinMasonry:!0,isFlyoutOpen:this.props.isFlyoutOpen,viewType:a,backgroundColor:"transparentDarkGray",iconColor:"white",iconSize:e})))}},{key:"renderEditButton",value:function(e){var t=this.props,n=t.pin,r=n.id,i=n.carousel_data,a=t.viewParameter,l=t.viewType;return o.a.createElement(S.a,{id:"edit-button"},o.a.createElement(T.a,null,o.a.createElement(le,{component:0,pinId:r,onToggleModal:this.handleToggleHover,view:l,viewParameter:a,carouselSlotCurrentIndex:i&&i.index,style:e})))}},{key:"renderEditAndSendRow",value:function(e,t){var n={bgColor:"transparentDarkGray",iconColor:"white",size:"md"};return o.a.createElement(ue,{padding:1,position:"absolute",top:!0,left:!0,display:"flex"},e&&o.a.createElement(u.b,{padding:1},this.renderSendShareButton("md")),t&&o.a.createElement(u.b,{padding:1},this.renderEditButton(n)))}},{key:"renderPrimaryButtons",value:function(){var e=this,t=this.props,n=t.hideSaveButton,r=t.inNewUserOneTapExperiment,i=t.onSave,a=t.pin,l=t.showRepinButton,s=t.showPromoteButton,c=t.showPersistentPromoteButton,d=t.showCondensedInfo,p=t.showButtons,f=t.viewer,m=t.saveOptions,h=t.viewParameter,b=t.showClickthroughButton,y="controlled"===m.type,v=m&&"persistentOneClickSave"===m.type,_=y&&m.saved&&m.save,E=l||s,O=m&&"none"!==m.type?m.renderPinSaveTooltip:void 0;if(!(_||c||p&&E||!!O||v))return b?o.a.createElement(u.b,{position:"absolute",bottom:!0,color:"transparentDarkGray",right:!0,marginBottom:2,marginRight:2,shape:"pill"},o.a.createElement(u.b,{paddingX:3,paddingY:1},o.a.createElement(u.K,{color:"white",bold:!0,size:"xs"},"Open"))):null;if(n)return null;var P=null,x=o.a.createElement(S.a,{id:"pin-save-button"},o.a.createElement(T.a,null,o.a.createElement(se,{onClickCallback:function(){e.handleClickLogging(0),Object(I.b)("Lead",function(){g.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Repin Click"})})},onToggleModal:this.handleToggleHover,oneTapSave:y?m:void 0,pin:a,renderPinSaveTooltip:O})));s?P=o.a.createElement(S.a,{id:"promote-button"},o.a.createElement(w.a,{loader:ae},function(e){return o.a.createElement(e,{pin:a})})):"inline"===m.type?P=o.a.createElement(S.a,{id:"better-save"},o.a.createElement(w.a,{loader:ie},function(t){return o.a.createElement(t,{initialSelection:m&&m.initialSelection,useMasonryFlyout:!0,onSave:function(){m&&m.onSave&&m.onSave(),i&&i()},onToggleFlyout:e.handleToggleSubmenu,onToggleModal:e.handleToggleHover,pin:a,renderPinSaveTooltip:O,viewParameter:h,renderSavedStatus:null})})):"persistentOneClickSave"===m.type?P=o.a.createElement(w.a,{loader:oe},function(t){return o.a.createElement(t,{onToggleModal:e.handleToggleHover,pin:a,saveOptions:m})}):(_||l&&f.isAuth)&&(P=r?o.a.createElement(S.a,{id:"nux-one-click-save"},o.a.createElement(T.a,null,o.a.createElement(re,{onClickCallback:this.handleSaveButtonClick,pin:a}))):x),d&&(P=x);var k="inline"!==m.type||d?"auto":"100%";return o.a.createElement(ue,{padding:2,position:"absolute",top:!0,right:!0,width:k},P)}},{key:"renderGradientOverlay",value:function(e){var t=this.props.showButtons;return o.a.createElement(u.b,{position:"relative"},e,t&&o.a.createElement(u.b,{bottom:!0,left:!0,height:"100%",position:"absolute",right:!0,top:!0,width:"100%",dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",opacity:.3}}}))}},{key:"renderClickThrough",value:function(e){var t=this.props,n=t.denseViewSelected,r=t.domain,i=t.isEligibleForWebCloseup,a=t.pin.id,l=t.sourceUrl;return o.a.createElement(G,{denseViewSelected:n,domain:r,isEligibleForWebCloseup:i,sourceUrl:l,pinId:a,position:e,textColor:"white",backgroundColor:"transparentDarkGray",borderRadius:20,onClick:this.handleClickthroughLogging,hoverStyle:{backgroundColor:"#333"},maxHeight:32,paddingX:0})}},{key:"renderHolisticHoverOwnPinViewCondensed",value:function(){var e=this.props,t=e.pin.id,n=e.domain,r=e.sourceUrl,i=e.showEditPinButton,a={size:"md",iconColor:"white",bgColor:"transparentDarkGray"},l=te({pinId:t,domain:n,sourceUrl:r,bgColor:"transparentDarkGray"},a);return o.a.createElement(ue,{padding:1,width:"100%",position:"absolute",bottom:!0,left:!0,display:"flex",alignItems:"center",justifyContent:"around"},o.a.createElement(u.b,{padding:1},o.a.createElement(u.b,{width:40,height:40},o.a.createElement(E,Object.assign({},l,{onClick:this.handleClickthroughLogging})))),o.a.createElement(u.b,{padding:1},i&&this.renderEditButton(a)),o.a.createElement(u.b,{padding:1},this.renderSendShareButton("md")))}},{key:"renderHolisticHoverOwnPinView",value:function(){var e=this.props,t=e.showSendButton,n=e.showEditPinButton,r=e.pin.id,i=e.domain,a=e.isEligibleForWebCloseup,l=e.sourceUrl,s={iconColor:"white",bgColor:"transparentDarkGray",size:"sm"};return o.a.createElement(ue,{padding:1,position:"absolute",bottom:!0,left:!0,display:"flex",width:"100%",alignItems:"center",height:50},o.a.createElement(u.b,{width:"".concat(65,"%")},o.a.createElement(G,{domain:i,isEligibleForWebCloseup:a,sourceUrl:l,pinId:r,position:"relative",textColor:"white",backgroundColor:"transparentDarkGray",borderRadius:20,onClick:this.handleClickthroughLogging,hoverStyle:{backgroundColor:"#333"},maxHeight:32,paddingX:0})),o.a.createElement(u.b,{width:"".concat(35,"%"),display:"flex",justifyContent:"end"},n&&o.a.createElement(u.b,{padding:1},this.renderEditButton(s)),t&&o.a.createElement(u.b,{padding:1},this.renderSendShareButton("sm"))))}},{key:"renderSecondaryButtons",value:function(){return this.props.showCondensedInfo?this.renderHolisticHoverOwnPinViewCondensed():this.renderHolisticHoverOwnPinView()}},{key:"render",value:function(){var e=this.props,t=e.currentlyPlayingVideo,n=e.children,i=e.isEligibleForAnalyticsCloseup,a=e.showReactions,l=e.isEnabledPointerHoverCursorExp,c=e.pin,d=c.carousel_data,p=c.id,f=c.videos,m=e.selection,h=e.showButtons,b=e.viewParameter,g=e.viewType,w=e.componentType,E=e.isLikedByMe,O=this.cropImageStyles(),P=!!f&&!!f.video_list,T=(f&&f.video_list&&f.video_list[Object.keys(f.video_list)[0]]||{}).duration,S=void 0===T?0:T;return o.a.createElement(u.b,{"data-test-id":d?"carousel-pin":"",position:"relative"},h&&d&&o.a.createElement(v.a,{pinId:p,componentType:w,viewParameter:b,viewtype:g}),o.a.createElement(_.b,{deeplinkUrls:Object(C.m)(p),onClick:this.handleOnSourceImageClick,forceRefresh:1,extraData:{isReact:!0,reactData:this.props.pin,searchOptions:this.props.searchOptions},style:{cursor:l?"pointer":"zoom-in",display:"block",position:"relative"},to:Object(Q.b)(p,i||!1)},o.a.createElement(u.u,{shape:"rounded",wash:!0},o.a.createElement(u.b,{dangerouslySetInlineStyle:{__style:O},minHeight:55},this.renderGradientOverlay(n))),o.a.createElement(u.b,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0})),m!==ct.NO_SELECTION&&o.a.createElement("div",{className:s()("pinSelectionBorder",{selected:m===ct.SELECTED})}),o.a.createElement(r.Fragment,null,a&&h?o.a.createElement(r.Fragment,null,o.a.createElement(ue,{position:"absolute",top:!0,left:!0,padding:2},o.a.createElement(u.o,{accessibilityLabel:y.a._("Like pin button","accessibility label for a button to like a pin"),bgColor:"transparentDarkGray",icon:"heart",iconColor:E?"red":"white",onClick:this.handleLikeButtonClick})),this.renderSecondaryButtons()):o.a.createElement(r.Fragment,null,h&&this.renderSecondaryButtons(),this.renderPrimaryButtons()),h||!P||t?null:o.a.createElement(ue,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex"},o.a.createElement(x.a,{duration:S}))))}}])&&J(n.prototype,i),a&&J(n,a),t}();ne(de,"defaultProps",{onToggleFlyout:function(){},pinsBoardEditableByViewer:!1,showCondensedInfo:!1,showOnPinAnalyticsNUX:!1,showPromoteButton:!1,showPersistentPromoteButton:!1});var pe=Object(i.connect)(function(e,t){var n=t.pin.id,r=t.boardActivity,o=e.ui.app.videosAutoplaying,i=Object(Q.i)(n,o),a=r&&r.id||n,l=e.activityItems[a];return{currentlyPlayingVideo:i,isLikedByMe:l&&l.reaction_by_me||!1}},function(e,t){return{toggleLike:Object(Y.bindActionCreators)(K.a,e)}})(de),fe=n("vl7u");function me(e){var t=e.feedbackType,n=e.topic,r=e.pinner||{},i=r.full_name,a="topic"===t,l=!a&&"followed"===t,s="/".concat(r.username,"/"),c=Object(fe.g)(n),d="/search/pins/?q=".concat(encodeURIComponent(c),"&rs=image_only_attribution"),p=a?d:s,f={topic:y.a._("From {topic}","attribution on pin rep"),followed:y.a._("From {pinnerName}","attribution on pin rep"),pfyBoard:y.a._("Picked for you","attribution on pin rep"),pfy:y.a._("Picked for you","attribution on pin rep")}[t];if(!f)return null;if(l||a){var m=0===f.indexOf("{"),h=a?n:i,b=m?f.slice(f.indexOf("}")+1):f.slice(0,f.indexOf("{"));return m?o.a.createElement(u.b,{display:"inlineBlock",marginTop:1},o.a.createElement(_.b,{to:p},o.a.createElement(u.K,{bold:!0,inline:!0,size:"xs",truncate:!0},h)),o.a.createElement(u.K,{inline:!0,size:"xs"},b)):o.a.createElement(u.b,{display:"inlineBlock",marginTop:1},o.a.createElement(u.K,{inline:!0,size:"xs"},b),o.a.createElement(_.b,{to:p},o.a.createElement(u.K,{bold:!0,inline:!0,size:"xs",truncate:!0},h)))}return o.a.createElement(u.b,{display:"inlineBlock",marginTop:1},o.a.createElement(u.K,{inline:!0,size:"xs"},f))}var he=n("Irlq");function be(e){var t=e.pin,n=e.feedbackType,r=e.imageOnlyAttribution,i=e.isHovering,a=e.isVideo,l=e.onClickThrough,s=e.sourceUrl,c=Object(C.m)(t.id),d=t.attribution||{},p=d.author_url||d.provider_url,f=d.author_name,m=d.rich_site_name||d.provider_name,h=f?Object(he.b)(y.a._("by {{ authorName }}","attribution on pin rep"),{authorName:f}):m,b=!h&&t.has_required_attribution_provider?t.domain:h,g=p||s,v=g&&b,w=i&&!v&&r&&!a&&!t.is_native&&"followed"!==n,E=(t.source_interest||{}).name,O="io-topic-attr-"+E;return o.a.createElement(o.a.Fragment,null,v&&o.a.createElement(u.b,{paddingY:1},o.a.createElement(u.K,{size:"sm",bold:!0},o.a.createElement(_.b,{deeplinkUrls:c,external:!0,onClick:l,pinId:t.id,stopPropagation:!0,style:{color:"#898989"},to:g},b))),r&&n&&o.a.createElement(u.b,{"data-test-id":O}),w&&n&&o.a.createElement(me,{feedbackType:n,pinner:t.pinner,topic:E}))}var ye=n("xP02");function ge(e){var t=e.avatarUrl,n=e.creditNameLink,r=e.name,i=void 0===r?"":r;return n?o.a.createElement(_.b,{className:"underlineLink",stopPropagation:!0,to:n},o.a.createElement(u.a,{name:i,src:t,size:"sm"})):o.a.createElement(u.a,{name:i,src:t,size:"sm"})}function ve(e){var t=e.name,n=e.creditNameLink;return o.a.createElement(u.b,null,n?o.a.createElement(_.b,{className:"underlineLink",stopPropagation:!0,to:n},o.a.createElement(u.K,{truncate:!0,size:"xs",bold:!0},t)):o.a.createElement(u.K,{truncate:!0,size:"xs",bold:!0},t))}function we(e){var t=e.title,n=e.link;return t?o.a.createElement(u.b,null,n?o.a.createElement(_.b,{className:"underlineLink",stopPropagation:!0,to:n},o.a.createElement(u.K,{truncate:!0,size:"xs"},t)):o.a.createElement(u.K,{truncate:!0,size:"xs"},t)):null}var _e=n("VI9K"),Ee=32,Oe=function(e){return!!e.promoter&&!e.is_downstream_promotion};var Pe=Object(i.connect)(null,function(e){return{setMostRecentPin:function(t){return e(Object(_e.a)(t))}}})(function(e){var t,n,r,i,a,l,s=e.hideTitle,c=e.pin,d=e.viewType,p=e.viewParameter,f=e.setMostRecentPin,m=c.board,h=c.promoter,b=c.pinner||{},g=Oe(c),v=c.promoter||b;g&&h?(t="/".concat(h.username,"/"),n=y.a._("Promoted by"),i=h.full_name,l=h.image_small_url):(t=m&&m.url,n=b.full_name,i=m&&m.name&&"protected"!==m.privacy?m.name:"",l=b.image_small_url,r="/".concat(b.username,"/"),a=m?m.url:"");var w=!g&&!!h,E=o.a.createElement(u.b,{display:"flex",direction:"row",alignItems:"center",marginLeft:-1,marginRight:-1},o.a.createElement(u.b,{paddingX:1},o.a.createElement(ye.a,{user:v,username:v&&v.username,avatarSize:Ee,isDarkPromoter:w,pinId:c.id,viewParameter:p},o.a.createElement(ge,{avatarUrl:l,creditNameLink:r,name:n}))),o.a.createElement(u.b,{paddingX:1,overflow:"hidden"},o.a.createElement(ve,{creditNameLink:r,name:n}),!s&&o.a.createElement(we,{link:a,title:i})));return!t||r||a?E:o.a.createElement(_.b,{className:"underlineLink",stopPropagation:!0,onClick:function(){f(c.id),Object(R.a)(101,{view:d,viewParameter:p,element:g?283:27,objectId:c.id})},to:t},E)}),Te=n("UmN8"),Se=Object(r.lazy)(function(){return n.e("BoardActivityPinRepReactionsCommon").then(n.bind(null,"sB4Q"))});function xe(e){var t=e.pin,n=e.feedbackType,r=e.hideAttribution,i=e.imageOnlyAttribution,a=e.isHovering,l=e.imageOnly,s=e.isVideo,d=e.onClickThrough,p=(e.onReactionReplyClick,e.showCredits),f=e.showPinReactionsReply,m=e.sourceUrl,h=e.viewParameter,b=e.viewType,y=t.promoter||!l&&(p||"followed"===n),g=t.board&&t.board.should_show_board_activity,v=y&&!r;("promoted"===n||t.promoter&&!t.is_downstream_promotion)&&(v=!0);var w=t&&t.board_activity&&t.board_activity.id||t.id;return o.a.createElement(o.a.Fragment,null,o.a.createElement(be,{pin:t,feedbackType:n,imageOnlyAttribution:i,isHovering:a,isVideo:s,onClickThrough:d,sourceUrl:m}),(y||g)&&o.a.createElement(u.b,{dangerouslySetInlineStyle:{__style:{zIndex:c.a.max,position:"relative"}},paddingY:1},!g&&v&&o.a.createElement(Pe,{hideTitle:!!g,pin:t,viewParameter:h,viewType:b}),g&&o.a.createElement(u.b,{position:"relative","data-test-id":"board-activity-reactions",minHeight:16},o.a.createElement(Te.a,{name:"group_boards_reactions"},function(e){var t=e.anyEnabled;return o.a.createElement(T.a,null,o.a.createElement(Se,{activityId:w,showReply:f,inReactionsExperiment:t}))}))))}var ke=n("HcgI"),Ce=Object(i.connect)(function(e,t){var n=e.pins,r=t.pinId;return{carousel_data:n[r]&&n[r].carousel_data}})(function(e){var t=e.carousel_data,n=e.description;if(t){var r=t.carousel_slots,i=void 0===r?[]:r,a=t.index;i[a]&&i[a].details&&(n=i[a].details)}var l=t?{height:"39px",overflow:"hidden"}:{};return o.a.createElement(u.b,{dangerouslySetInlineStyle:{__style:l},paddingY:1},o.a.createElement(u.K,{size:"sm",bold:!0},o.a.createElement(ke.a,{text:n,options:{hashtags:{appendText:"".concat(n),source:"hashtag_pinrep"}}})))}),Ie=n("EQo2"),je=Object(i.connect)(function(e,t){var n=e.pins,r=t.pinId;return{carousel_data:n[r]&&n[r].carousel_data}})(function(e){var t,n=e.carousel_data,r=e.pinId,i=e.sourceUrl,a=e.pinDeeplinkUrls,l=e.handleOneTapLogging,s="one-tap-desktop",c=i;if(n){var u=n.carousel_slots,d=void 0===u?[]:u,p=n.id,f=n.index;d[f]&&d[f].link&&(c=d[f].link),t={carousel_slot_id:d[f]&&d[f].id,carousel_data_id:p,carousel_slot_index:f},s+="-carousel"}return o.a.createElement("div",{"data-test-id":"otpp"},o.a.createElement(S.a,{id:s},o.a.createElement(_.b,{auxData:t&&t,className:"oneTapNavigateLink",deeplinkUrls:a,external:!0,onClick:l,pinId:r,stopPropagation:!0,to:c})))});function Le(e){var t,n,r=e.buyableProduct,i=e.showProductInfo,a=e.richSummary;if(!i)return null;if(r){var l=r.display_active_min_price,s=r.display_active_max_price;n=r.is_available,t=l===s?l:"".concat(l," - ").concat(s)}else if(a&&(a.products||[]).length>0){var c=a.products[0].offer_summary||{},d=c.availability;t=c.price,1===d?n=!0:2===d&&(n=!1)}return t?o.a.createElement(u.b,{display:"flex",paddingY:1},o.a.createElement(u.b,{marginRight:2},o.a.createElement(u.K,{size:"sm"},t)),void 0!==n&&o.a.createElement(u.K,{size:"sm",color:n?"darkGray":"gray"},n?y.a._("In stock","A product Pin that is available"):y.a._("Out of stock","A product Pin that is out of stock"))):null}var Re=76;var De=function(e){var t=e.chips;return o.a.createElement(u.b,{display:"flex",direction:"row",justifyContent:"between"},t.map(function(e){var t=e.images["750x"]||{};return o.a.createElement(u.b,{marginTop:1,key:e.id},o.a.createElement(_.b,{stopPropagation:!0,to:"/pin/".concat(e.id,"/")},o.a.createElement(u.u,{shape:"rounded",width:Re,height:Re,wash:!0},o.a.createElement(u.p,{alt:"",naturalHeight:t.height,naturalWidth:t.width,src:t.url,fit:"cover"}))))}))},Be=n("E1Qe"),Ae=n("19Gw"),ze=n("4081"),Ne=n("cNuv"),He=n("k3nM"),Ve=n("bUMO"),Ue=n("mcMS");function Me(e){var t=e.richSummary;return o.a.createElement(u.b,{display:"flex"},!!t.display_cook_time&&o.a.createElement(u.b,{alignItems:"center",display:"flex"},o.a.createElement(u.n,{icon:"clock",accessibilityLabel:y.a._("cooking time","time it takes to cook a recipe"),color:"darkGray",size:10,inline:!0}),o.a.createElement(u.b,{paddingX:1},o.a.createElement(u.K,{inline:!0,size:"sm"},!!t.display_cook_time&&Object(Ve.a)(Object(Ue.b)(t.display_cook_time))))))}var Fe=n("LCmp"),We=n("q579"),Ge=n("kR61"),qe=n("dmID"),Ke=n("wHKh"),Ye=n("3BJc"),Qe=n("JsRk"),Xe=n("kIql"),Je=n("hCBh");function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ot(e,t,n[t])})}return e}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return ct});var it=Object(r.lazy)(function(){return Promise.all([n.e(8),n.e("PinFeedbackButtonCommon")]).then(n.bind(null,"w8LQ"))}),at=Object(r.lazy)(function(){return n.e("PinFeedbackConfirmationCommon").then(n.bind(null,"+LSA"))}),lt=Object(r.lazy)(function(){return Promise.resolve().then(n.bind(null,"dmID"))}),st=Object(r.lazy)(function(){return n.e("PinRepSavedCommon").then(n.bind(null,"mnfC"))}),ct={NO_SELECTION:"NO_SELECTION",SELECTED:"SELECTED",UNSELECTED:"UNSELECTED"},ut=function(e){var t=e.aggregated_pin_data.creator_analytics,n=e.creator_analytics,r=e.story_pin_data_id;return!n||!!!r&&t?t:n},dt=(P.a.number,P.a.number,P.a.number,P.a.shape({}),P.a.string,P.a.bool,P.a.bool,P.a.func,P.a.shape({title:P.a.oneOfType([P.a.string,P.a.arrayOf(P.a.node)]),subTitle:P.a.oneOfType([P.a.string,P.a.arrayOf(P.a.node)])}),P.a.bool,P.a.bool,P.a.bool,P.a.bool,P.a.bool,P.a.shape({type:P.a.oneOf(["promoted","followed","topic","pfyBoard","pfy","search","newsHub","default"]).isRequired,data:P.a.shape({})}),P.a.bool,P.a.bool,P.a.func,P.a.func,Be.a.isRequired,P.a.bool,P.a.shape({push:P.a.func.isRequired}),P.a.shape({type:P.a.oneOf(["classic","inline","controlled","persistentOneClickSave"]).isRequired}),P.a.shape({boardId:P.a.string,localPinId:P.a.string,sectionId:P.a.string,title:P.a.string,url:P.a.string}),P.a.shape({query:P.a.string.isRequired,scope:P.a.string.isRequired}),P.a.oneOf([ct.NO_SELECTION,ct.SELECTED,ct.UNSELECTED]),q.b,P.a.bool,P.a.bool,P.a.bool,P.a.bool,P.a.number.isRequired,P.a.bool,P.a.shape({id:P.a.string,isAuth:P.a.bool,isPartner:P.a.bool,username:P.a.string}),P.a.number,P.a.number,P.a.bool,function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return r=this,o=(e=tt(t)).call.apply(e,[this].concat(l)),n=!o||"object"!==Ze(o)&&"function"!=typeof o?rt(r):o,ot(rt(rt(n)),"state",{isHovering:!1,flyoutShown:!1,flyoutSource:"send",isNewlySaved:!1,savedInfo:n.props.savedInfo}),ot(rt(rt(n)),"onPinRepClick",function(e){var t=n.props,r=t.pin,o=r.id,i=r.is_promoted,a=t.requestContext,l=t.router,s=t.viewer,c=t.setCurrentVideo,u=t.videosAutoplaying,d=Object(Q.b)(o,n.isEligibleForAnalyticsCloseup());Object(Q.i)(o,u)&&(0===n.currentVideoCurrentTime||n.currentVideoCurrentTime)&&c({pinId:o,isPromoted:i,currentTime:n.currentVideoCurrentTime}),Object(I.b)("Lead",function(){g.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Pin Click"})});var p=e.target;if(p&&p.nodeName&&p.parentElement){var m=new f.b(n.context.userAgent.raw,n.context.userAgent.platform);if(m.shouldDeepLink(document.referrer,n.context.userAgent,s.isAuth))return e.preventDefault(),void m.navigateToDeepLink(n.context.unauthId,Object(C.m)(o));var h=p.parentElement,b=p.nodeName,y=h.nodeName,v=h.parentElement&&h.parentElement.nodeName;"A"!==b&&"A"!==y&&"BUTTON"!==b&&"BUTTON"!==y&&"A"!==v&&"BUTTON"!==v&&(new j.c(a,"smb_pin_stats_from_business_profile").enabled(),e.metaKey||e.ctrlKey?(e.preventDefault(),window.open(d)):l.push(d))}}),ot(rt(rt(n)),"getComponentType",function(){return n.props.componentType||0}),ot(rt(rt(n)),"getSourceURL",function(){var e=n.props.pin,t=e.link;return e.tracked_link||t}),ot(rt(rt(n)),"getPinTypes",function(){var e=n.props.pin,t=e.attribution,r=e.buyable_product,o=e.carousel_data,i=e.embed,a=e.is_collage_pin,l=e.is_eligible_for_web_closeup,s=e.rich_summary,c=e.videos,u=[];o&&u.push("carousel"),l&&u.push("oneTap"),Object(Q.h)(c)&&u.push("video");var d=i||t&&t.embed||null;return d&&"gif"===d.type&&u.push("gif"),d&&d.src&&!d.type&&u.push("embeddedVideo"),(r||s&&"product"===s.type_name)&&u.push("product"),s&&"recipe"===s.type_name&&u.push("recipe"),a&&u.push("collage"),u}),ot(rt(rt(n)),"feedbackHelpers",Object(b.a)({i18n:y.a,interpolateNamedTemplate:he.b})),ot(rt(rt(n)),"handleSave",function(){n.setState({isHovering:!0})}),ot(rt(rt(n)),"handleOneTapLogging",function(){var e=n.props,t=e.contextLogData,r=e.pin.id,o=a.a.getInstance(),i=o.getViewFromContext();n.handleClickthroughLogging(!0),Object(R.a)(13,$e({},t,{closeup_navigation_type:"web_closeup",objectId:r,component:0,view:3})),o.addViewToContext(i)}),ot(rt(rt(n)),"_getPrefetchCompletionPercent",function(e){if(!window||!window.prefetchCompletion||!window.prefetchCompletion[e])return"0";var t=window.prefetchCompletion[e],n=t.downloadedAssets,r=t.totalAssets;return r?(n/r*100).toFixed(3).toString():"-1"}),ot(rt(rt(n)),"handleClickthroughLogging",function(e){var t=n.props,r=t.contextLogData,o=t.pin,i=o.id,a=o.link,l=t.slotIndex,s=t.viewType,c=t.viewParameter;Object(R.a)(12,$e({},r,{view:s,viewParameter:c,component:n.getComponentType(),objectId:i,grid_index:l,pin_id:i,prefetch_percentage_complete:e?n._getPrefetchCompletionPercent(a):null}))}),ot(rt(rt(n)),"handleReactionReplyClick",function(e){return function(){return n.props.router.push(e)}}),ot(rt(rt(n)),"handleToggleFlyout",function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,o=!(!e&&!t);n.setState({flyoutShown:e,isHovering:o,flyoutSource:r})}),ot(rt(rt(n)),"handleMouseOver",function(){n.state.isHovering||n.setState(function(){return{isHovering:!0}})}),ot(rt(rt(n)),"handleMouseLeave",function(){n.state.isHovering&&n.setState(function(){return{isHovering:!1}})}),ot(rt(rt(n)),"handleCurrentVideoCurrentTimeChanged",function(e){var t=n.props,r=t.pin,o=t.videosAutoplaying,i=r.id;Object(Q.i)(i,o)&&(n.currentVideoCurrentTime=e.time)}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(t,o.a.Component),n=t,i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.savedInfo&&t.savedInfo!==e.savedInfo?{isNewlySaved:!0,savedInfo:e.savedInfo}:null}}],(r=[{key:"getTruncatedString",value:function(e){var t=this.props.pin.is_promoted?60:50;return e&&Object(Fe.a)(e.trim(),t)||""}},{key:"getPinTitle",value:function(){var e=this.props.pin,t=e.carousel_data,n=e.title,r=e.buyable_product,o=e.rich_summary,i=o&&"mobile application"!==o.type_name;if(this.isOwnPin&&!t)return"";if(t){var a=t.carousel_slots,l=void 0===a?[]:a,s=t.index;if(l[s]&&l[s].title)return l[s].title.trim()}return this.getTruncatedString(n||i&&o.display_name||r&&r.title)}},{key:"getFeedbackType",value:function(){var e=this.props,t=e.feedback,n=e.viewParameter,r=e.pin;return this.feedbackHelpers.getFeedbackType({board:r.board,feedback:t,viewParameter:n,pin:r,pinner:r.pinner})}},{key:"isEligibleForAnalyticsCloseup",value:function(){var e=this.props,t=e.requestContext,n=e.viewParameter,r=e.viewer,o=92===n,i=43===n,a=!1;return this.isOwnPin&&r.isPartner&&!o&&!i&&(a=new j.c(t,"smb_pin_stats_from_business_profile").enabledWithNoActivation()),a}},{key:"render",value:function(){var e=this,t=this.props,n=t.boardCount,r=t.carouselIndex,i=t.contextLogData,a=t.createdAt,l=t.debugImpressionLogged,d=t.debugImpressionStarted,f=t.denseViewSelected,b=t.feedback,g=t.feedbackText,v=t.isHomefeedContextualMenuTooltipExperience,w=t.isNewOrResurrectedNonPartner,_=t.hideAttribution,E=t.hideFeedbackButton,O=t.showCondensedInfo,P=t.showFeedbackOverlay,x=t.isShareable,k=t.hideHover,I=t.hideSaveButton,L=t.lowResOnly,R=t.highResOnly,D=t.onError,B=t.onLoad,A=t.pin,z=t.pinsBoardEditableByViewer,N=t.saveOptions,H=t.savedInfo,V=t.searchOptions,U=t.selection,M=void 0===U?ct.NO_SELECTION:U,F=t.showImageOnly,W=t.slotIndex,G=t.truncatePinHeight,q=t.viewer,K=t.viewParameter,Y=t.viewType,X=t.showCredits,J=t.showFeedback,Z=t.showPersistentPromoteButton,$=t.showProductInfo,ee=t.showPinReactionsReply,te=t.showPinStats,ne=t.showSavedInfo,re=t.undoAction,oe=t.undoText,ie=t.requestContext,ae="boolean"==typeof F?F:w,le=w,se=A.ad_match_reason,ce=A.aggregated_pin_data,ue=A.board,de=A.board_activity,fe=A.buyable_product,me=A.carousel_data,he=A.creator_analytics,be=A.debug_info_html,ye=A.description,ge=void 0===ye?"":ye,ve=A.domain,we=A.dominant_color,_e=A.grid_title,Ee=A.id,Oe=A.image_signature,Se=A.images,Re=A.is_quick_promotable,Be=A.is_eligible_for_web_closeup,Ve=A.pinner,Ue=void 0===Ve?{}:Ve,Fe=A.promoted_is_removable,Ye=A.promoter,Qe=A.recommendation_reason,Xe=A.rich_summary,Ze=A.source_interest,et=A.category,tt=this.state,nt=tt.flyoutShown,rt=tt.flyoutSource,ot=tt.isHovering,dt=tt.isNewlySaved,pt=this.getSourceURL(),ft=((h.a.instance.getPlacedExperience(12)||{}).display_data||{}).lite,mt=(this.isOwnPin||this.canDelete)&&!ft,ht=!ft&&x,bt=$e({},i,Object(Ge.a)(A,i)),yt=((ce||{}).aggregated_stats||{}).done,gt=(ce||{}).pin_tags_chips,vt=Se&&Se["236x"].height,wt=Se&&Se["236x"].width,_t=this.getPinTypes(),Et=Object(Q.f)(A),Ot=Object(qe.getEligiblePinTypes)(_t),Pt=Ot.isCarousel,Tt=Ot.isOneTap,St=Ot.isRecipe,xt=Ot.isStoryPin,kt=Ot.isVideo,Ct=xt?"":this.getTruncatedString(_e),It=this.getPinTitle(),jt=this.getTruncatedString(ge),Lt=ae,Rt=!Lt&&"string"==typeof _e&&!me,Dt=!Lt&&!It&&!Rt,Bt=!Lt&&It&&!Rt,At=s()("PinRep","Module","Pin","hasAttribution","summary","fullWidth",{flyoutShown:nt}),zt=Object(Ke.j)(A),Nt=_t.length>0,Ht=!Tt&&!Pt&&kt||St&&!Pt&&(!A.rich_summary||!A.rich_summary.aggregate_rating||!A.rich_summary.aggregate_rating.review_count),Vt=Bt&&It.length>0,Ut=Dt&&jt.length>0,Mt=q.isAuth&&q.isEmployee&&be,Ft=0!==Object.keys(he||{}).length||0!==Object.keys(ce||{}).length&&0!==Object.keys(ce.creator_analytics||{}).length,Wt=N||(!mt&&void 0!==n&&n>1?{type:"inline"}:{type:"classic"}),Gt="inline"===Wt.type||"classic"===Wt.type,qt=q.isAuth&&ht&&x&&Gt,Kt="persistentOneClickSave"===Wt.type,Yt=Wt&&Wt.savedInfo&&Wt.savedInfo.title||"",Qt=this.getFeedbackType(),Xt=ve;if(me){var Jt=r||me.index||0,Zt=me.carousel_slots,$t=void 0===Zt?[]:Zt,en=$t[Jt]&&$t[Jt].link||"";Xt=(Xt=en&&We.a.parse(en).hostname)&&Xt.replace("www.","")||ve}var tn=A.is_native||A.promoter||!Lt&&(X||"followed"===Qt),nn=A.board&&A.board.should_show_board_activity,rn=nn&&tn&&!_,on=1===W&&!!v,an=new j.c(ie,"px_pinstats_90_day_default_on_grid").enabled();return o.a.createElement(u.b,{position:"relative"},o.a.createElement("div",{className:At,onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave,"data-test-id":"pin","data-test-pin-id":A.id},H&&ne&&o.a.createElement(S.a,{id:"savedInfo"},o.a.createElement(T.a,null,o.a.createElement(u.b,{width:"172px",marginTop:Kt?3:2,paddingY:3,paddingX:3,position:"absolute",left:!0,top:!0,dangerouslySetInlineStyle:{__style:{zIndex:c.a.saved}}},o.a.createElement(st,{isNewlySaved:dt,name:Kt?Yt:H.title,url:Kt?Wt&&Wt.savedInfo&&Wt.savedInfo.url:H.url})))),o.a.createElement(p,{debugImpressionLogged:l,debugImpressionStarted:d,slotIndex:this.props.slotIndex},o.a.createElement(Te.a,{name:"web_eg_pin_hover_cursor"},function(t){var n=t.anyEnabled;return o.a.createElement("div",{className:s()("pinWrapper",J&&"disableHover"),"data-test-id":"pinWrapper",onClick:e.onPinRepClick,style:{cursor:n?"pointer":null}},rn&&nn&&o.a.createElement(u.b,{marginBottom:2},o.a.createElement(Pe,{hideTitle:!!nn,pin:A,viewParameter:K,viewType:Y})),Be&&o.a.createElement(je,{pinDeeplinkUrls:Object(C.m)(Ee),handleOneTapLogging:e.handleOneTapLogging,pinId:Ee,sourceUrl:pt}),o.a.createElement(Te.a,{name:"web_nux_one_tap_save",isEligible:q.isAuth&&Object(Je.d)({user:q,days:7})},function(t){var r=t.anyEnabled;return o.a.createElement(pe,{boardActivity:de,buyableProduct:fe,componentType:e.getComponentType(),contextLogData:bt,denseViewSelected:f,description:ge,domain:Xt,dominantColor:we,doneCount:yt,hideSaveButton:I,imageHeight:vt,imageSignature:Oe,images:Se,imageWidth:wt,showReactions:nn,isEligibleForWebCloseup:Be,isEligibleForAnalyticsCloseup:e.isEligibleForAnalyticsCloseup(),isEnabledPointerHoverCursorExp:n,inNewUserOneTapExperiment:r,onSave:e.handleSave,onToggleFlyout:e.handleToggleFlyout,pin:A,pinsBoardEditableByViewer:z,pinTitle:It,requestContext:ie,saveOptions:Wt,searchOptions:V,selection:M,showButtons:!!(ot&&!k||nt),showCondensedInfo:O,showEditPinButton:mt,showPromoteButton:Re,showRepinButton:!Re&&!Fe,showSendButton:qt,showPersistentPromoteButton:Z,slotIndex:W,sourceUrl:pt,truncatePinHeight:G,viewer:q,viewParameter:K,viewType:Y,isFlyoutOpen:nt&&"save"!==rt},o.a.createElement(Te.a,{name:"ads_desktop_video_ads",isEligible:kt},function(t){var n=t.anyEnabled;return!kt||!n&&Et?o.a.createElement(Ie.a,{lowResOnly:L,highResOnly:R,onLoad:B,onError:D,pin:A,saved:!!H}):o.a.createElement(He.a,{inAdsDesktopVideoExperiment:n,isExperimentalPinRep:!1,lowResOnly:L,highResOnly:R,onLoad:B,onError:D,pin:A,saved:!!H,onTimeChange:e.handleCurrentVideoCurrentTimeChanged,viewType:Y,viewParameter:K,currentTimeFromPinRep:e.currentVideoCurrentTime})}))}),!!gt&&!O&&o.a.createElement(De,{chips:gt}),(!Lt||Qt)&&!O&&(Nt||te||Vt||Ut||$||a||Rt||Mt||Qt)&&o.a.createElement(u.b,{display:"flex",direction:"row",marginTop:1},o.a.createElement(u.b,{paddingX:2,flex:"grow",width:"100%"},te&&Ft&&o.a.createElement(Ae.a,{stats:ut(A),isVideo:kt,isStoryPin:!!A.story_pin_data_id,show90Days:an}),a&&!Et&&o.a.createElement(u.b,{paddingY:1},o.a.createElement(u.K,{color:"darkGray",size:"xs"},y.a.getHumanizedTimesince(a))),Nt&&!Ht&&o.a.createElement(u.b,{"data-test-id":"pin-type",minHeight:Pt&&Tt?40:24},o.a.createElement(T.a,null,o.a.createElement(lt,{componentType:0,viewParameter:K,viewType:Y,pinId:Ee,pin:A,types:_t}))),o.a.createElement(u.b,{display:"flex",justifyContent:"between"},o.a.createElement(u.b,{column:12},o.a.createElement(Te.a,{name:"web_creators_story_pin_display",activate:!0,isEligible:!!A.story_pin_data_id},function(e){return e.anyEnabled&&o.a.createElement(u.b,{paddingY:1},o.a.createElement(Ne.a,{icon:"story-pin",pinId:Ee}))}),o.a.createElement(Le,{buyableProduct:fe,richSummary:Xe,showProductInfo:$}),Rt&&Ct.length>0&&o.a.createElement(u.b,{paddingY:1},o.a.createElement(u.K,{size:"sm",bold:!0},o.a.createElement(ke.a,{text:Ct,options:{hashtags:{appendText:Ct,source:"hashtag_pinrep"}}}))),Bt&&It.length>0&&o.a.createElement(ze.a,{title:It,pinId:Ee}),Dt&&jt.length>0&&o.a.createElement(Ce,{description:jt,pinId:Ee}),St&&o.a.createElement(Me,{richSummary:Xe}),o.a.createElement(xe,{feedbackType:Qt,hideAttribution:_,imageOnly:Lt,imageOnlyAttribution:le,isHovering:ot,isVideo:kt,onClickThrough:e.handleClickthroughLogging,onReactionReplyClick:e.handleReactionReplyClick,pin:A,showCredits:X,showPinReactionsReply:ee,sourceUrl:pt,viewParameter:K,viewType:Y}))),Mt&&o.a.createElement(u.b,{paddingY:1},o.a.createElement("pre",null,be))),o.a.createElement(u.b,{display:"flex",direction:"column",alignItems:"center"},!E&&Qt&&o.a.createElement(u.b,{"data-test-id":"feedback-button",display:"flex",justifyContent:"end",position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:c.a.max}},width:24,height:24},o.a.createElement(T.a,null,o.a.createElement(it,{ad_match_reason:se,bestPinImgSrc:zt,board:ue,feedbackData:b&&b.data||{},feedbackType:Qt,hideDownload:kt,isHomefeedContextualMenuTooltip:on,pinDescription:jt,pinTitle:It,pinId:Ee,pinCategory:et,pinImage:Se&&Se["236x"].url,pinner:Ue,promoter:Ye,recommendationReason:Qe,reportPin:Object(m.a)({pin:A,viewParameter:K,viewType:Y}),sourceInterest:Ze,viewParameter:K,viewType:Y}))))))}))),o.a.createElement(Te.a,{name:"web_homefeed_control_panel_nag",activate:!1},function(e){var t=e.anyEnabled;return o.a.createElement(Te.a,{name:"web_homefeed_control_panel_pin_feedback"},function(e){var n=e.anyEnabled;return o.a.createElement(Te.a,{name:"web_homefeed_control_contextual_menu_v2"},function(e){var r=e.anyEnabled;return!!J&&o.a.createElement(T.a,null,o.a.createElement(at,{feedbackText:g,feedbackType:Qt,pinId:Ee,pinImage:Se&&Se["236x"].url,undoAction:re,undoText:oe,isContextMenuV2Exp:r,isHomefeedControlPanelExp:t||n,showFeedbackOverlay:P}))})})}))}},{key:"canDelete",get:function(){return(this.props.pin.access||[]).includes("delete")}},{key:"isOwnPin",get:function(){return(this.props.pin.access||[]).includes("write")}}])&&et(n.prototype,r),i&&et(n,i),t}());ot(dt,"contextTypes",{unauthId:P.a.string.isRequired,userAgent:P.a.shape({platform:P.a.string.isRequired,platformVersion:P.a.arrayOf(P.a.number),raw:P.a.string.isRequired})}),ot(dt,"defaultProps",{pinsBoardEditableByViewer:!1,showCondensedInfo:!1,showPersistentPromoteButton:!1,truncatePinHeight:!0,showSavedInfo:!0});t.b=Object(Y.compose)(Qe.withRouter,Xe.a,q.e,Object(i.connect)(function(e,t){var n,r=e.boards,o=e.experiences,i=e.pins,a=e.ui,l=e.viewer,s=t.pin,c=s.id,u=s.board,d=i[c],p=l.isAuth?l.boardCount:void 0,f=u&&u.id,m=r.content[f],h=m&&(m.access||[]).includes("write"),b=l.isAuth&&(Object(Je.d)({user:l})||Object(Je.e)({user:l}))&&!l.isPartner;if(d){var y=d.carousel_data;n=y&&y.index}return{boardCount:p,carouselIndex:n,isHomefeedContextualMenuTooltipExperience:o&&o.eligibleExperiences&&o.eligibleExperiences[1000116]&&501093===o.eligibleExperiences[1000116].experience_id,feedbackText:d&&d.feedbackText,hideSaveButton:d&&d.pinner&&d.pinner.blocked_by_me,isNewOrResurrectedNonPartner:b,isShareable:!m||"secret"!==m.privacy,pinsBoardEditableByViewer:h,savedInfo:d&&d.savedInfo,showFeedback:d&&d.showFeedback,showFeedbackOverlay:d&&d.showFeedbackOverlay,undoAction:d&&d.undoAction,undoText:d&&d.undoText,videosAutoplaying:a.app.videosAutoplaying}},function(e,t){return{setCurrentVideo:function(t){return e(Object(Ye.c)(t))}}}))(dt)},XHfN:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=n("jJRE"),l=n("8gFa"),s=n.n(l),c=n("tcFq");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function p(e){var t=e.eventData.videoEvent,n=t.videoDuration,r=t.startTime,o=t.endTime,i=t.videoStartTime,a=t.videoEndTime,l=t.isAudible,s=t.height,c=t.width,p=t.playbackState,f=t.quartile,m=t.quartilePercentValue,h=t.windowHeight,b=t.windowWidth,y=t.viewability;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}({},d(e,["eventData"]),{eventData:{videoEventData:{videoDuration:n,time:r,endTime:o,videoTime:i,endVideoTime:a,isAudible:l,height:s,width:c,playbackState:p,quartile:f,quartilePercentValue:m,windowHeight:h,windowWidth:b,viewability:y}}})}var f=n("BEiP"),m=n("+U6O");function h(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){E(e,t,n[t])})}return e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=[0,.25,.5,.75,.95,.97],P=[0,.5,.8,1],T={threshold:P},S=1e3,x=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function k(){return(new Date).getTime()}function C(e,t){for(var n=0;n<t.length;n+=1){var r=t[n],o=t[n+1];if(null==o)return r;if(r<=e&&e<o)return r}return null}function I(e){return e.volume>0}var j=function(e){function t(e){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=v(t).call(this,e),n=!i||"object"!==b(i)&&"function"!=typeof i?_(r):i,E(_(_(n)),"handleWindowResize",function(){var e=n.getDimensions(),t=n.currentInterval,r=t.height,o=t.width;e.height!==r||e.width!==o?n.startNewInterval(e):(n.currentInterval.windowHeight=e.windowHeight,n.currentInterval.windowWidth=e.windowWidth)}),E(_(_(n)),"handleTimeChange",function(e){if(n.currentInterval.videoDuration){var t=C(e.time*S/n.currentInterval.videoDuration,O);if(n.props.playing&&null!=t&&O.includes(t)&&!n.seenQuartiles.has(t)){var r=k();n.logVideoEvent(6906,y({},n.currentInterval,{startTime:r,endTime:r,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*t),quartilePercentValue:t})),n.seenQuartiles.add(t)}n.videoTime=e.time*S,n.props.onTimeChange&&n.props.onTimeChange(e)}}),E(_(_(n)),"handleDurationChange",function(e){n.currentInterval.videoDuration=e.duration*S,n.props.onDurationChange&&n.props.onDurationChange(e)}),E(_(_(n)),"handleReady",function(e){n.ready||(n.ready=!0,n.startNewInterval({playbackState:n.getPlaybackState(n.props)})),n.props.onReady&&n.props.onReady(e)}),E(_(_(n)),"onEnded",function(e){n.logFourthQuartileEvent(),n.seenQuartiles=new Set,n.props.onEnded&&n.props.onEnded(e)}),E(_(_(n)),"handleVisibilityChange",function(e,t){if(0!==e.length){var r=e.slice(-1)[0],o=C(Number.parseFloat(r.intersectionRatio.toFixed(2)),P);null!=o&&o!==n.currentInterval.viewability&&n.startNewInterval({viewability:o})}}),E(_(_(n)),"handleContextMenu",function(e){e.preventDefault()});var a=k();return n.ready=!1,n.handleWindowResize=s()(n.handleWindowResize,1e3),n.videoWrapperRef=o.a.createRef(),n.currentInterval={videoDuration:0,startTime:a,endTime:a,videoStartTime:0,videoEndTime:0,isAudible:I(e),playbackState:n.getPlaybackState(e),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},n.videoTime=0,n.seenQuartiles=new Set,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.currentInterval=y({},this.currentInterval,this.getDimensions()),window.addEventListener("resize",this.handleWindowResize)}},{key:"componentDidUpdate",value:function(e){var t={};I(e)&&!I(this.props)?t.isAudible=!1:!I(e)&&I(this.props)&&(t.isAudible=!0);var n=this.getPlaybackState(this.props);this.getPlaybackState(e)!==n&&(t.playbackState=n),Object.keys(t).length>0&&this.startNewInterval(t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize),this.startNewInterval({playbackState:x.PAUSED}),this.startNewInterval()}},{key:"getPlaybackState",value:function(e){return this.ready?e.playing?x.PLAYING:x.PAUSED:x.LOADING}},{key:"getDimensions",value:function(){var e,t;if("object"===b(this.videoWrapperRef)&&this.videoWrapperRef.current){var n=this.videoWrapperRef.current;n.clientHeight&&n.clientWidth&&(e=n.clientHeight,t=n.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}},{key:"logVideoEvent",value:function(e,t){var n=t.height,r=t.width,o=t.windowHeight,i=t.windowWidth,a=t.viewability,l=h(t,["height","width","windowHeight","windowWidth","viewability"]);if(this.props.onLogVideoEvent&&null!=n&&null!=r&&null!=o&&null!=i&&null!=a){var s=y({},l,{height:n,width:r,windowHeight:o,windowWidth:i,viewability:a});this.props.onLogVideoEvent(e,y({},this.props.contextLogData,{eventData:{videoEvent:s}}))}}},{key:"logFourthQuartileEvent",value:function(){var e=k();this.logVideoEvent(6906,y({},this.currentInterval,{startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1}))}},{key:"startNewInterval",value:function(e){var t=k();this.logVideoEvent(6904,y({},this.currentInterval,{endTime:t,videoEndTime:this.videoTime})),this.currentInterval=y({},this.currentInterval,e,{startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1})}},{key:"render",value:function(){var e=this.props,t=(e.contextLogData,e.onLogVideoEvent,h(e,["contextLogData","onLogVideoEvent"]));return t.onDurationChange=this.handleDurationChange,t.onReady=this.handleReady,t.onTimeChange=this.handleTimeChange,t.onEnded=this.onEnded,o.a.createElement(c.a,{options:T,onVisibilityChange:this.handleVisibilityChange},o.a.createElement("div",{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu},o.a.createElement(f.a,t)))}}])&&g(n.prototype,r),i&&g(n,i),t}();E(j,"defaultProps",m.Q.defaultProps);t.a=Object(i.connect)(void 0,function(e){return{onLogVideoEvent:function(t,n){return e(Object(a.a)(t,p(n)))}}})(j)},bUMO:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("GyhR"),o=n.n(r),i=n("Qo1m"),a=n("z/1d"),l=n("Irlq");function s(e){var t=e.m,n=e.h,r=e.rm,s=e.rh;return t&&(!n||s<=0)?Object(l.b)(i.a.ngettext("{{mins}} minute","{{mins}} minutes",r),{mins:o.a.createElement(a.a,{key:"recipe-minutes",maximumFractionDigits:2,value:r})}):n?Object(l.b)(i.a.ngettext("{{hrs}} hour","{{hrs}} hours",s),{hrs:o.a.createElement(a.a,{key:"recipe-hours",maximumFractionDigits:2,value:s})}):null}},exzK:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=n("oko/"),l=n("Qo1m"),s=n("9Y9K"),c=n("2Npu"),u=n("+U6O");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={slider:{cursor:"pointer",height:"100%",position:"relative",width:"10%",zIndex:"105",pointerEvents:"auto"}},f=function(e,t,n,r,o,i,a,l,s,c){if(!c||!o){var u=o.carousel_slots,p=o.id;t&&t(108,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e}({},s,{objectId:e,component:l,view:a,viewParameter:i,eventData:{pinCarouselSlotEventData:{carouselSlotId:u[n]&&Number(u[n].id),carouselDataId:Number(p),carouselSlotIndex:n,toCarouselSlotIndex:r}}}))}},m=function(e,t,n,r,o,i){i||void 0===r||(e.preventDefault(),e.stopPropagation(),r(t,n)),void 0!==o&&o(n)};t.a=Object(s.compose)(c.a,Object(i.connect)(function(e,t){var n=e.pins,r=t.pinId;return{carousel_data:n[r]&&n[r].carousel_data}},function(e){return{changeCarouselSlotIndex:function(t,n){return e(Object(a.a)(t,n))}}}))(function(e){var t=e.carouselIndex,n=e.carousel_data,r=e.changeCarouselSlotIndex,i=e.handleCarouselSwipe,a=e.pinId,s=e.contextLog,c=e.contextLogData,d=e.viewParameter,h=e.viewType,b=e.componentType,y=e.isEditMode,g=n.carousel_slots,v=n.index,w=void 0!==t?t:v,_=Math.max(0,w-1),E=Math.min(g.length-1,w+1);return o.a.createElement(u.b,{display:"flex",justifyContent:"between",position:"absolute",left:!0,right:!0,bottom:!0,top:!0},o.a.createElement("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:function(e){m(e,a,_,r,i,y),f(a,s,w,_,n,d,h,b,c,y)},onKeyUp:function(e){m(e,a,_,r,i,y),f(a,s,w,_,n,d,h,b,c,y)},style:p.slider},w>0&&o.a.createElement(u.b,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(u.n,{color:"white",icon:"arrow-back",accessibilityLabel:l.a._("View Previous","Button to advance carousel to the previous image")}))),o.a.createElement("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:function(e){m(e,a,E,r,i,y),f(a,s,w,E,n,d,h,b,c,y)},onKeyUp:function(e){m(e,a,E,r,i,y),f(a,s,w,E,n,d,h,b,c,y)},style:p.slider},w<g.length-1&&o.a.createElement(u.b,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(u.n,{color:"white",icon:"arrow-forward",accessibilityLabel:l.a._("View Next","Button to advance carousel to the next image")}))))})},k3nM:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("Ivf5"),a=n("HW6o"),l=n("Qo1m"),s=n("EQo2"),c=n("+U6O"),u={__path:"M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},d={__path:"M17.496 14.572a1 1 0 0 1-1 1h-.001a1.001 1.001 0 0 1-.999-1.001l.002-4.652-7.29 7.288a.995.995 0 0 1-.707.293.999.999 0 0 1-.707-1.707l7.293-7.29L9.428 8.5a1 1 0 0 1 .001-2h.001l8.071.005-.005 8.067zM12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"},p={overlay:{__style:{backgroundColor:"#000",opacity:.8}}};function f(e){var t=e.backgroundImage,n=e.naturalHeight,r=e.naturalWidth,i=e.onRestartVideo,a=e.pinTitle;e.pin;return o.a.createElement(c.p,{alt:a||l.a._("pin image","image of a pin"),naturalHeight:n,naturalWidth:r,src:t},o.a.createElement(c.b,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:p.overlay}),o.a.createElement(c.b,{justifyContent:"center",direction:"column",display:"flex",position:"absolute",height:"100%",width:"100%"},o.a.createElement(c.P,{shape:"rounded"},o.a.createElement(c.b,{display:"flex",justifyContent:"center",padding:2},o.a.createElement(c.n,{accessibilityLabel:l.a._("Visit site","Button when pressed goes to pin's website"),color:"white",dangerouslySetSvgPath:d,size:25}),o.a.createElement(c.b,{margin:1}),o.a.createElement(c.K,{bold:!0,color:"white",size:"lg",truncate:!0},l.a._("Visit site","Button when pressed goes to pin's website")))),o.a.createElement(c.b,{margin:3}),o.a.createElement(c.P,{shape:"rounded",onTouch:i},o.a.createElement(c.b,{display:"flex",justifyContent:"center",padding:2},o.a.createElement(c.n,{accessibilityLabel:l.a._("Watch again","Button when pressed restarts the video"),color:"white",dangerouslySetSvgPath:u,size:25}),o.a.createElement(c.b,{margin:1}),o.a.createElement(c.K,{bold:!0,color:"white",size:"lg",truncate:!0},l.a._("Watch again","Button when pressed restarts the video"))))))}var m=n("XHfN"),h=n("zBQm"),b=n("3BJc");function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g=-1;var v=Object(i.connect)(void 0,function(e,t){return{setCurrentVideo:function(t){return e(Object(b.c)(t))}}})(function(e){var t=e.inAdsDesktopVideoExperiment,n=e.isAutoplay,i=e.currentTime,a=e.lowResOnly,u=e.highResOnly,d=e.onLoad,p=e.onError,b=e.saved,v=e.onTimeChange,w=e.isExperimentalPinRep,_=e.pin,E=e.playing,O=e.setCurrentVideo,P=e.viewType,T=e.viewParameter,S=y(Object(r.useState)(!1),2),x=S[0],k=S[1],C=_.videos?_.videos.video_list.V_HLSV4:{},I=_.videos?_.videos.id:-1,j=C&&[{type:"video/m3u8",src:C.url}],L=Object(h.f)(_),R=L&&!_.is_eligible_for_web_closeup,D=w&&L&&_.is_eligible_for_web_closeup,B=!L||R||!w,A=t?!n:!E,z=(_.images["236x"]||{}).url,N=C||{},H=N.height,V=N.thumbnail,U=N.width,M=_.id,F=_.is_promoted;return x?o.a.createElement(c.b,null,o.a.createElement(f,{backgroundImage:z,naturalHeight:H,naturalWidth:U,pin:_,onRestartVideo:function(e){var t=e.event;t.preventDefault(),t.stopPropagation(),O({pinId:M,isPromoted:F,currentTime:0}),k(!1)}})):A?o.a.createElement(c.b,null,o.a.createElement(s.a,{lowResOnly:a,highResOnly:u,onLoad:d,onError:p,pin:_,saved:b})):o.a.createElement(c.b,null,o.a.createElement(m.a,{contextLogData:{component:0,view:P,viewParameter:T,objectId:_.id,video_id:I},accessibilityMaximizeLabel:l.a._("Maximize","Maximize button on video"),accessibilityMinimizeLabel:l.a._("Minimize","Minimize button on video"),accessibilityMuteLabel:l.a._("Mute","Mute button on video"),accessibilityPauseLabel:l.a._("Pause","Pause button on video"),accessibilityPlayLabel:l.a._("Play","Play button on video"),accessibilityUnmuteLabel:l.a._("Unmute","Unmute button on video"),aspectRatio:U/H,captions:"",hlsConfig:{capLevelToPlayerSize:!0,startLevel:g,startPosition:i||-1},loop:B,onTimeChange:v,playing:E,poster:z||V,src:j,volume:0,onEnded:function(){k(D)}}))});function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=Object(a.a)(v),x=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=this,o=(e=E(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==w(o)&&"function"!=typeof o?P(r):o,T(P(P(n)),"handleVisibilityChanged",function(e){var t=n.props,r=t.currentTimeFromPinRep,o=t.pin,i=t.setCurrentVideo,a=t.pauseAutoplay,l=t.videosAutoplaying,s=o.id,c=o.is_promoted,u=Object(h.c)(s,l),d=Object(h.i)(s,l),p=Object(h.a)(s,l);e?c?i({pinId:s,isPromoted:c,currentTime:u||r||n.currentVideoCurrentTime}):p&&i({pinId:s,isPromoted:c,currentTime:u||r||n.currentVideoCurrentTime}):!e&&d&&a({pinId:s,isPromoted:c,currentTime:r||n.currentVideoCurrentTime})}),T(P(P(n)),"handleVideoTimeChange",function(e){var t=n.props,r=t.pin,o=t.onTimeChange,i=t.videosAutoplaying,a=r.id;Object(h.i)(a,i)&&(n.currentVideoCurrentTime=e.time),o&&o(e)}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.props.onLoad&&this.props.onLoad()}},{key:"componentDidUpdate",value:function(e){var t=e.appInFocus,n=this.props,r=n.appInFocus,o=n.currentTimeFromPinRep,i=n.pauseAutoplay,a=n.pin,l=n.setCurrentVideo,s=n.videosAutoplaying,c=a.id,u=a.is_promoted,d=Object(h.i)(c,s),p=Object(h.c)(c,s);r!==t&&!r&&d?(this.pausedDueToBrowserOutOfFocus=!0,i({pinId:c,isPromoted:u,currentTime:o||this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&r&&(this.pausedDueToBrowserOutOfFocus=!1,l({pinId:c,isPromoted:u,currentTime:p||o||this.currentVideoCurrentTime}))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.currentTimeFromPinRep,n=e.pauseAutoplay,r=e.pin,o=e.videosAutoplaying,i=r.id,a=r.is_promoted;Object(h.i)(i,o)&&n({pinId:i,isPromoted:a,currentTime:t||this.currentVideoCurrentTime})}},{key:"render",value:function(){var e=this.props,t=e.isAutoplay,n=e.pin,r=e.videosAutoplaying,i=e.viewParameter,a=e.viewType,l=e.highResOnly,s=e.lowResOnly,c=e.onError,u=e.onLoad,d=e.saved,p=e.inAdsDesktopVideoExperiment,f=e.isExperimentalPinRep,m=n.id,b=Object(h.c)(m,r),y=Object(h.i)(m,r)&&t;return o.a.createElement(S,{currentTime:b,inAdsDesktopVideoExperiment:p,isAutoplay:t,viewParameter:i,viewType:a,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pin:n,playing:y,trackFullVisible:!1,highResOnly:l,lowResOnly:s,onError:c,onLoad:u,saved:d,isExperimentalPinRep:f})}}])&&_(n.prototype,r),i&&_(n,i),t}();t.a=Object(i.connect)(function(e,t){return{appInFocus:e.ui.app.appInFocus,isAutoplay:e.ui.app.isAutoplay,videosAutoplaying:e.ui.app.videosAutoplaying}},function(e,t){return{pauseAutoplay:function(t){return e(Object(b.a)(t))},setCurrentVideo:function(t){return e(Object(b.c)(t))}}})(x)},m2OL:function(e,t,n){"use strict";var r=n("ptua"),o=n("rUah"),i=n("zBQm");t.a=function(e){var t,n=e.pin,a=e.viewParameter,l=e.viewType,s=n.id,c=n.videos,u=Object(i.f)(n);if(Object(i.h)(c)&&c){var d=c.video_list,p=d[Object.keys(d)[0]];t=p&&p.duration}return function(){r.a.instance.dispatch(Object(o.b)({id:s,isPromoted:u,videoDuration:t,viewParameter:a,viewType:l,type:"pin"}))}}},mcMS:function(e,t,n){"use strict";function r(e){var t=e.m,n=void 0===t?0:t,r=e.h,o=void 0===r?0:r;return{m:n,h:o,rm:o>0?0:n,rh:o<=0?o:n>45?o+1:n>15?o+.5:o}}function o(e){var t=Math.floor(e/3600);return r({m:Math.floor(e%3600/60),h:t})}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},rSK6:function(e,t,n){"use strict";var r=n("QJ2d"),o=n("JU/q");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){return e.length>32?"".concat(e.substring(0,32).trim(),"..."):e};t.a=function(e){var t=e.i18n,n=e.interpolateNamedTemplate,l=e.isContextMenuV2Exp;return{getLearnMoreUrl:function(e){switch(e){case 1:return r.a.settings.HELP_PROMOTED_PINS_RETARGETED_PIN_URL;case 2:case 3:return r.a.settings.HELP_PROMOTED_PINS_LOOKALIKE_TARGETING_URL;default:return r.a.settings.HELP_PROMOTED_PINS_URL}},getRecommendationDescription:function(e){var r=e.ad_match_reason,o=e.board,i=e.feedbackType,s=e.makeNavigateLink,c=e.pinner,u=e.promoter,d=e.recommendationReason,p=e.sourceInterest;switch(i){case"pfy":return l?t._("This Pin was inspired by your recent activity","Pin feedback reason"):t._("This Pin is inspired by your recent activity.","Pin feedback reason");case"pfyBoard":var f=d.board,m=f.name,h=s("navigation",f.url,m);return n(l?t._("This Pin was inspired by your board {{ boardLink }}","Pin feedback - inspired by your board"):t._("This Pin is inspired by your board {{ boardLink }}.","Pin feedback - inspired by your board"),{boardLink:h});case"topic":var b=p.name,y=p.url_name,g=s("topicUrl","/topics/".concat(y),b);return n(l?t._("This Pin was inspired by {{ formattedTopic }}","Pin feedback"):t._("Youâ€™re seeing this Pin because you follow the Topic {{ formattedTopic }}.","Pin feedback"),{formattedTopic:g});case"followed":var v="/".concat(c.username),w=s("boardUrl",o.url,a(o.name)),_=s("pinnerUrl",v,a(c.full_name));return l?c.explicitly_followed_by_me?n(t._("This Pin is from {{ formattedPinner }}, a profile you follow","Pin feedback"),{formattedPinner:_}):n(t._("This Pin is from {{ formattedBoard }}, a board you follow","Pin feedback"),{formattedBoard:w}):c.explicitly_followed_by_me?n(t._("Youâ€™re seeing this Pin because you follow {{ formattedPinner }}â€™s Board {{ formattedBoard }}.","Pin feedback"),{formattedPinner:_,formattedBoard:w}):n(t._("Youâ€™re seeing this Pin because you follow the Board {{ formattedBoard }}.","Pin feedback"),{formattedBoard:w});case"promoted":switch(r){case 1:case 2:case 3:return l?t._("This ad was personalized for you using info from one of our partners","Pin feedback"):t._("This ad was personalized for you using info from one of our partners.","Pin feedback");default:var E=u.full_name,O=u.username,P=s("promotedLink",O?"/"+O+"/":"/",E);return n(l?t._("{{ promoterLink }} paid to have this Pin show up where\n                youâ€™d be more likely to notice it","Pin feedback"):t._("{{ promoterLink }} paid to have this Pin show up where\n                youâ€™d be more likely to notice it.","Pin feedback"),{promoterLink:P})}default:return null}},getFeedbackType:function(e){var t=e.board,n=e.feedback,r=e.viewParameter,o=e.pin,i=o.promoter,a=o.is_downstream_promotion,l=o.recommendation_reason,s=e.pinner,c=n&&n.type;return i&&!a?"promoted":c||(l?"FOLLOWED_INTEREST"===l.reason?"topic":l.board?"pfyBoard":"pfy":t&&t.followed_by_me||s&&s.explicitly_followed_by_me?"followed":140===r||144===r||141===r||145===r||139===r||3173===r?"related":92===r?"default":3082===r?"newsHub":null)},getHidePinAction:function(e){var t,n,r=e.feedbackData,o=e.feedbackType,a=e.pinId,l=e.recommendationReasonId,s=e.pinFeedbackType,c=e.complaintReason,u=e.throughId,d="promoted"===o;switch(o){case"promoted":t="promotedComplaint";break;case"search":t="unrelatedSearchPin";break;case"related":t="relatedPinHide";break;case"newsHub":t="newsHubPinHide";break;default:t="complaint"}switch(o){case"search":n={query:r.query,pin_id:a};break;case"related":n={pin:a};break;case"newsHub":n={pinId:a,newsId:r.newsId};break;default:n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}({complaint_reason:c||0,pin_id:a},l?{recommendation_reason_id:l}:{},{feedback_type:s||1,promoted:d},u?{through_id:u}:{})}return{action:t,actionOptions:n}},getUnfollowAction:function(e){var r=e.board,i=e.feedbackType,a=e.makeNavigateLink,s=e.pinner,c=e.sourceInterest;if("topic"===i){if(c){var u=c.id,d=c.name,p=c.url_name,f=a("topicUrl","/topics/".concat(p),d,!0);return{action:"unfollowTopic",actionOptions:{interest_id:u,interest_list:o.a},title:l?"":t._("Unfollowed","Title shown when unfollowing a certain topic / pin / board"),subTitle:n(l?t._("We'll show you less Pins from {{ formattedTopic }} in the future.","Confirmation text after unfollowing a topic"):t._("Youâ€™ve unfollowed {{ formattedTopic }}. You can follow it again by searching for it.","Confirmation text after unfollowing a topic"),{formattedTopic:f})}}}else if("followed"===i){var m=r||{},h=m.id,b=m.name,y=m.url,g=s.explicitly_followed_by_me,v=s.full_name,w=s.username,_="/".concat(w);if(r&&s){var E=a("boardUrl",y,b,!0),O=a("pinnerUrl",_,v,!0),P=g?n(t._("Youâ€™ve unfollowed {{ formattedPinner }}â€™s Board {{ formattedBoard }}. You can follow it again by searching for it.","Confirmation text after unfollowing a board"),{formattedPinner:O,formattedBoard:E}):n(t._("Youâ€™ve unfollowed {{ formattedBoard }}. You can follow it again by searching for it.","Confirmation text after unfollowing a board"),{formattedBoard:E});return l&&(P=g?n(t._("You unfollowed {{ formattedPinner }} and wonâ€™t see Pins they save anymore.","Confirmation text after unfollowing a user"),{formattedPinner:O}):n(t._("You unfollowed the board {{ formattedBoard }} and wonâ€™t see Pins saved to it anymore.","Confirmation text after unfollowing a board"),{formattedBoard:E})),{action:"unfollowBoard",actionOptions:{board_id:h},title:l?"":t._("Unfollowed","Title shown when unfollowing a certain topic / pin / board"),subTitle:P}}}return null}}}},rUah:function(e,t,n){"use strict";function r(e){return{type:"REPORT_CONTENT_SHOW",payload:{id:e.id,isPromoted:e.isPromoted,videoDuration:e.videoDuration,viewParameter:e.viewParameter,viewType:e.viewType,type:e.type}}}function o(){return{type:"REPORT_CONTENT_DISMISS"}}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o})},xP02:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),i=n("+U6O"),a=136,l={__style:{opacity:.5}};function s(e){return e.isHorizontalDesign?o.a.createElement(i.b,{height:"100%",width:"100%",display:"flex",direction:"row",position:"absolute",top:!0,left:!0},o.a.createElement(i.b,{dangerouslySetInlineStyle:l,color:"midnight",height:"100%",width:"100%",flex:"grow"}),o.a.createElement(i.b,{color:"white",width:"2px",flex:"none"}),o.a.createElement(i.b,{dangerouslySetInlineStyle:l,color:"olive",width:"100%",flex:"grow"}),o.a.createElement(i.b,{color:"white",width:"2px",flex:"none"}),o.a.createElement(i.b,{dangerouslySetInlineStyle:l,color:"maroon",width:"100%",flex:"grow"})):o.a.createElement(i.b,{height:"100%",width:"100%",display:"flex",direction:"row",position:"absolute",top:!0,left:!0},o.a.createElement(i.b,{dangerouslySetInlineStyle:l,color:"midnight",height:"100%",flex:"grow"}),o.a.createElement(i.b,{color:"white",width:"2px",flex:"none"}),o.a.createElement(i.b,{display:"flex",height:a,direction:"column",flex:"grow"},o.a.createElement(i.b,{dangerouslySetInlineStyle:l,color:"olive",width:"100%",flex:"grow"}),o.a.createElement(i.b,{color:"white",height:"2px",flex:"none"}),o.a.createElement(i.b,{dangerouslySetInlineStyle:l,color:"maroon",width:"100%",flex:"grow"})))}var c=n("Qo1m");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={__style:{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.43) 0%, rgba(0,0,0,0) 60%)"}},g=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),p=0;p<l;p++)s[p]=arguments[p];return r=this,a=(e=f(t)).call.apply(e,[this].concat(s)),n=!a||"object"!==u(a)&&"function"!=typeof a?h(r):a,b(h(h(n)),"state",{isLoaded:[!1,!1,!1],isMounted:!1}),b(h(h(n)),"getImageArray",function(){var e=n.props,t=e.userPins,r=e.showcase,o=[];return t&&0!==t.length?(r&&0!==r.length?r&&1===r.length?o=r.filter(function(e){return"board"===e.type})[0].images["550x"].map(function(e){return e.url}):r&&(o=r.filter(function(e){return"board"===e.type}).map(function(e){return e.image_cover_url})):o=t.map(function(e){return(e.images["136x136"]||e.images["236x"]||e.images["736x"]).url}),o):o}),b(h(h(n)),"getImage",function(e,t){var r={transition:"opacity 500ms",opacity:n.state.isLoaded[t]?1:0};return o.a.createElement(i.b,{dangerouslySetInlineStyle:{__style:r},color:"white",height:"100%",width:"100%"},!!e&&o.a.createElement(i.p,{naturalHeight:1,src:e,fit:"cover",alt:c.a._("user's pin","image of one of a user's pins"),naturalWidth:1,color:"lightGray",onLoad:function(){return n.handleLoad(t)}}))}),b(h(h(n)),"handleLoad",function(e){var t=n.state,r=t.isLoaded,o=t.isMounted,i=d(r);i[e]=!0,o&&n.setState({isLoaded:i})}),n}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["PureComponent"]),n=t,(a=[{key:"componentDidMount",value:function(){this.setState({isMounted:!0}),this.getImageArray()}},{key:"render",value:function(){var e=this.props.isHorizontalDesign,t=this.getImageArray(),n=null;return n=1===t.length?o.a.createElement(i.b,{height:"100%",display:"flex",direction:"row"},this.getImage(t[0],0)):2===t.length?o.a.createElement(i.b,{height:"100%",display:"flex",direction:"row"},this.getImage(t[0],0),o.a.createElement(i.b,{color:"white",width:"1px",flex:"none"}),this.getImage(t[1],1)):e?o.a.createElement(i.b,{height:"100%",width:"100%",display:"flex",direction:"row"},o.a.createElement(i.b,{height:"100%",width:"100%"},this.getImage(t[0],0)),o.a.createElement(i.b,{color:"white",width:"2px",flex:"none"}),o.a.createElement(i.b,{height:"100%",width:"100%"},this.getImage(t[1],1)),o.a.createElement(i.b,{color:"white",width:"2px",flex:"none"}),o.a.createElement(i.b,{height:"100%",width:"100%"},this.getImage(t[2],2))):o.a.createElement(i.b,{height:"100%",width:"100%",display:"flex",direction:"row"},o.a.createElement(i.b,{height:"100%",flex:"grow"},this.getImage(t[0],0)),o.a.createElement(i.b,{color:"white",width:"2px",flex:"none"}),o.a.createElement(i.b,{display:"flex",height:136,direction:"column",flex:"grow"},o.a.createElement(i.b,{width:"100%",flex:"grow"},this.getImage(t[1],1)),o.a.createElement(i.b,{color:"white",height:"2px",flex:"none"}),o.a.createElement(i.b,{width:"100%",flex:"grow"},this.getImage(t[2],2)))),o.a.createElement(i.b,{height:136,display:"flex",direction:"column"},o.a.createElement(i.b,{width:"100%",position:"relative",flex:"grow"},o.a.createElement(s,{isHorizontalDesign:e}),n,o.a.createElement(i.b,{dangerouslySetInlineStyle:y,height:"100%",width:"100%",position:"absolute",top:!0,left:!0})))}}])&&p(n.prototype,a),l&&p(n,l),t}(),v=n("iJ35"),w=n("NmcB");function _(e,t){Object(w.a)(101,{view:e,viewParameter:t,component:13406,element:11373})}var E=function(e){var t=e.avatarUrl,n=e.isVerified,r=e.isHorizontalDesign,a=e.url,l=e.userFullName,s=e.viewParameter,c=e.viewType,u=r?80:86;return o.a.createElement(i.b,{dangerouslySetInlineStyle:{__style:{border:"2px white solid",marginTop:r?-58:-64,marginLeft:r?-6:0,zIndex:1}},display:"flex",flex:"none",shape:"circle"},o.a.createElement(i.b,{flex:"none",height:u,width:u},o.a.createElement(v.b,{onClick:_(c,s),to:a,stopPropagation:!0},o.a.createElement(i.a,{name:l,src:t,verified:n}))))},O=n("LCmp"),P=n("b7z0");function T(e){var t=e.text,n=e.singleLineMaxCharacters,r=e.isBold,i=e.isHorizontalDesign,a=e.numLines*n,l=Object(O.a)(t,a);return r?o.a.createElement(P.b,{align:i?"left":"center",overflow:"normal",size:"sm",weight:"semibold"},l):o.a.createElement(P.b,{align:i?"left":"center",overflow:"normal",size:"sm",weight:"normal",color:i?"darkGray":"gray"},l)}var S=18;function x(e){var t=e.description,n=e.domainUrl,r=e.isHorizontalDesign,a=e.userFullName,l=t||n,s={placeholder:{__style:{transition:"opacity 200ms",opacity:l?0:1}},subtitle:{__style:{transition:"opacity 200ms",opacity:l?1:0}}};return o.a.createElement(i.b,{position:"relative",width:"100%",marginTop:r?4:3,marginBottom:3,alignItems:r?"start":"center",display:"flex",direction:"column"},o.a.createElement(i.b,{height:S,width:"100%"},o.a.createElement(P.b,{align:r?"left":"center",truncate:!0,size:r?"lg":"md",weight:r?"bold":"semibold"},a)),o.a.createElement(i.b,{marginTop:2,overflow:"hidden",position:"relative",width:"100%"},o.a.createElement(i.b,{alignItems:"center",dangerouslySetInlineStyle:s.placeholder,direction:"column",display:"flex",height:"100%",left:!0,position:"absolute",top:!0,width:"100%"},o.a.createElement(i.b,{color:"lightGray",shape:"pill",width:180,flex:"grow"}),o.a.createElement(i.b,{height:6,flex:"none"}),o.a.createElement(i.b,{color:"lightGray",shape:"pill",width:140,flex:"grow"})),r&&!!n&&o.a.createElement(i.b,{dangerouslySetInlineStyle:s.subtitle,width:"100%",height:"100%",marginTop:-1},o.a.createElement(T,{numLines:2,isBold:!0,isHorizontalDesign:r,singleLineMaxCharacters:36,text:n})),r&&!!t&&o.a.createElement(i.b,{dangerouslySetInlineStyle:s.subtitle,width:"100%",height:"100%",marginTop:2},o.a.createElement(T,{isHorizontalDesign:r,numLines:2,singleLineMaxCharacters:36,text:t})),!r&&!!l&&o.a.createElement(i.b,{dangerouslySetInlineStyle:s.subtitle,width:"100%",height:"100%"},o.a.createElement(T,{isHorizontalDesign:r,numLines:2,singleLineMaxCharacters:27,text:l}))))}var k=n("Ivf5"),C=n("z/1d"),I=n("Irlq");function j(e){var t=e.followText,n=e.followerCount,r=e.isHorizontalDesign,a=e.showFollowers,l=e.userFollowed;return a?Object(I.b)(c.a._("{{ followCount }} {{ followText }}"),{followCount:o.a.createElement(i.b,{dangerouslySetInlineStyle:{__style:l?null:{opacity:.75}},"data-test-id":"followCount",display:"inlineBlock",key:"followCount",marginRight:1},o.a.createElement(P.b,{color:l?"gray":"white",size:r?"sm":"md",align:"center",weight:"semibold"},o.a.createElement(C.a,{value:n||0,shortform:!0,shortformMaximumFractionDigits:0}))),followText:o.a.createElement(i.b,{"data-test-id":"followText",display:"inlineBlock",key:"followText"},o.a.createElement(P.b,{weight:"bold",color:l?"darkGray":"white",size:r?"sm":"md",overflow:"normal",align:"center"},t))}):o.a.createElement(i.b,{"data-test-id":"followText",key:"followText"},o.a.createElement(P.b,{weight:"semibold",color:l?"darkGray":"white",size:r?"sm":"md",overflow:"normal",align:"center"},t))}var L=n("KCDi"),R=n("KsVg"),D=n("9Y9K"),B=n("Ii6Q");function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return r=this,i=(e=N(t)).call.apply(e,[this].concat(l)),n=!i||"object"!==A(i)&&"function"!=typeof i?V(r):i,U(V(V(n)),"handleClick",function(){var e=n.props,t=e.userFollowed,r=e.viewParameter,o=e.viewType;t?(n.unfollow(),Object(w.a)(46,{view:o,viewParameter:r,component:13406,element:11372})):(n.follow(),Object(w.a)(45,{view:o,viewParameter:r,component:13406,element:11372}))}),U(V(V(n)),"follow",function(){var e=n.props;(0,e.follow)(e.id),n.showConfirmation()}),U(V(V(n)),"showConfirmation",function(){var e=n.props,t=e.fullName,r=e.hideAllToasts,i=e.imageUrl,a=e.profileUrl,l=e.showToast;r(),l(function(e){var n=e.onHide;return o.a.createElement(L.a,{onHide:n,text:[c.a._("Now following","text that comes before a board/user name in toast"),t],href:a,imageUrl:i})})}),U(V(V(n)),"unfollow",function(){var e=n.props,t=e.id;(0,e.unfollow)(t)}),n}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,r["PureComponent"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.followerCount,n=e.isHorizontalDesign,r=e.showFollowerCount,a=e.userFollowed,l=r&&0!==t,s=this.props.userFollowed?c.a._("Following","User follow button"):c.a._("Follow","User follow button");return o.a.createElement(i.b,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginTop:n?"-22px":0}},display:"flex",justifyContent:"center",position:"relative"},o.a.createElement(i.P,{onTouch:this.handleClick,shape:"pill"},o.a.createElement(i.b,{alignItems:"center",color:a?"lightGray":"red",direction:"row",display:"flex",justifyContent:"center",paddingX:n?5:6,paddingY:n?3:4,shape:"pill"},o.a.createElement(j,{followerCount:t,followText:s,isHorizontalDesign:n,showFollowers:l,userFollowed:a}))))}}])&&z(n.prototype,a),l&&z(n,l),t}(),F=Object(D.compose)(R.a,Object(k.connect)(function(e,t){var n=t.id,r=(e.users||{})[n];return{userFollowed:!!r&&r.explicitly_followed_by_me}},function(e){return{follow:function(t){return e(Object(B.a)(t))},unfollow:function(t){return e(Object(B.b)(t))}}}))(M);function W(e){var t=e.avatarUrl,n=e.description,r=e.domainUrl,a=e.followerCount,l=e.id,s=e.isCreator,c=e.isHorizontalDesign,u=e.isVerified,d=e.userFullName,p=e.username,f=e.viewParameter,m=e.viewType,h=function(e){return"/".concat(e)}(p);return o.a.createElement(i.b,{alignItems:c?"start":"center",display:"flex",direction:"column",paddingX:c?5:6,paddingY:c?3:4,marginTop:2,width:"100%"},o.a.createElement(E,{avatarUrl:t,isHorizontalDesign:c,isVerified:u,url:h,userFullName:d,viewType:m,viewParameter:f}),c&&o.a.createElement(i.b,{position:"relative",width:"100%"},o.a.createElement(i.b,{display:"flex",marginTop:-2,marginRight:-2,position:"absolute",right:!0,top:!0},o.a.createElement(F,{fullName:d,followerCount:a,id:l,imageUrl:t,isHorizontalDesign:c,profileUrl:h,showFollowerCount:s})),o.a.createElement(i.b,{width:"100%",display:"flex",left:!0,marginTop:1},o.a.createElement(x,{description:n,domainUrl:r,isHorizontalDesign:c,userFullName:d}))),!c&&o.a.createElement(i.b,{width:"100%"},o.a.createElement(x,{userFullName:d,domainUrl:r,description:n,isHorizontalDesign:c}),o.a.createElement(i.b,{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(F,{followerCount:a,fullName:d,id:l,imageUrl:t,isHorizontalDesign:c,profileUrl:h,showFollowerCount:s}))))}var G=n("dsfX"),q=24;function K(e){var t=e.anchor,n=e.children,r=e.isHorizontalDesign;if(!t)return null;var a=r?320:236,l=t.getBoundingClientRect(),s=l.left,c=l.top,u=l.width,d=l.height,p=s+window.pageXOffset,f=c+window.pageYOffset,m=p+u+a+q/2>window.innerWidth,h={left:m?p:p+u,top:f+d/2,zIndex:G.a},b={borderRadius:21,boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)",left:m?-q/2-a:q/2,top:-a/2-44},y={top:-q/2,left:-q/2,fill:"white"},g=m?"M0 0 L12 12 L0 24":"M24 0 L12 12 L24 24";return o.a.createElement(i.b,{position:"absolute",dangerouslySetInlineStyle:{__style:h}},o.a.createElement(i.b,{position:"absolute",color:"white",dangerouslySetInlineStyle:{__style:b},width:a,overflow:"hidden"},n),o.a.createElement(i.b,{position:"absolute",dangerouslySetInlineStyle:{__style:y}},o.a.createElement("svg",{width:q,height:q},o.a.createElement("path",{d:g}))))}var Y=n("ePT2"),Q=n("IGno"),X=n("kIql"),J=n("k9eC"),Z=n("2YES");function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ie(e,t,n[t])})}return e}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=300,le=150,se=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=ne(t).call(this,e),n=!i||"object"!==$(i)&&"function"!=typeof i?oe(r):i,ie(oe(oe(n)),"anchorRef",o.a.createRef()),ie(oe(oe(n)),"loadUser",function(){var e=n.props.username,t=n.state.isMounted;e&&(Y.a.create("UserResource",{username:e,field_set_key:"profile"}).callGet().then(function(e){t&&n.setState({detailedUser:e.resource_response.data})}),Y.a.create("UserPinsResource",{username:e,page_size:3,field_set_key:"grid_item",isPrefetch:!1}).callGet().then(function(e){t&&n.setState({userPins:e.resource_response.data})}),Y.a.create("ShowcaseResource",{username:e,page_size:2,isPrefetch:!1}).callGet().then(function(e){t&&n.setState({showcase:e.resource_response.data})}),t&&n.setState({isLoaded:!0}))}),ie(oe(oe(n)),"handleScroll",function(){clearTimeout(n.openTimeout),n.state.isMounted&&(n.setState({isVisible:!1}),n.forceUpdate())}),ie(oe(oe(n)),"timeoutDismiss",function(){n.dismissTimeout=setTimeout(function(){n.state.isMounted&&(n.setState({isHovering:!1,isVisible:!1}),clearTimeout(n.openTimeout))},le)}),ie(oe(oe(n)),"handleDisplayCard",function(){var e=n.props,t=e.isDarkPromoter,r=e.pinId,o=e.requestContext,i=e.viewParameter,a=n.state,l=a.currentPinId,s=a.isLoaded,c=a.isMounted;clearTimeout(n.openTimeout),clearTimeout(n.dismissTimeout),r&&l!==r&&n.forceUpdate(),r&&n.setState({isHovering:!0,currentPinId:r});var u=new J.b(o,"web_avatar_hover_cards_v2");156!==i&&0!==i||t||!(u.check("enabled")||u.check("enabled2_vertical")||u.check("enabled2_horizontal"))?c&&n.setState({isVisible:!1}):(s||n.loadUser(),n.openTimeout=setTimeout(function(){c&&n.setState({isVisible:!0})},ae))}),ie(oe(oe(n)),"handleHideCard",function(){n.timeoutDismiss()}),n.state={currentPinId:e.pinId,detailedUser:null,isHovering:!1,isMounted:!1,isLoaded:!1,isVisible:!1,showcase:null,user:null,userPins:null},n}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,r["PureComponent"]),n=t,l=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.user,r=t.detailedUser;return{user:ee({},Boolean(n)?n:{},Boolean(r)?r:{})}}}],(a=[{key:"componentDidMount",value:function(){this.setState({isMounted:!0}),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.setState({isMounted:!1}),clearTimeout(this.openTimeout),clearTimeout(this.dismissTimeout),window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.props,t=e.avatarSize,n=e.children,r=e.requestContext,a=e.username,l=e.viewer,s=e.viewParameter,c=e.viewType,u=this.state,d=u.isVisible,p=u.showcase,f=u.user,m=u.userPins,h=f||{},b=h.about,y=h.domain_url,v=h.follower_count,w=h.full_name,_=h.id,E=h.image_medium_url,O=h.show_creator_profile,P=h.verified_identity,T=l.id===_,S=!!P&&P.verified,x=new J.b(r,"web_avatar_hover_cards_v2").checkWithNoActivation("enabled2_horizontal");return o.a.createElement(i.b,{onMouseOver:this.handleDisplayCard,onFocus:this.handleDisplayCard,onMouseLeave:this.handleHideCard},o.a.createElement(i.b,{marginLeft:-2,marginRight:-2,paddingX:2,position:"relative"},o.a.createElement(i.b,{height:t,left:!0,marginLeft:2,position:"absolute",ref:this.anchorRef,top:!0,width:t}),n),!T&&!!f&&!!a&&d&&o.a.createElement(i.b,null,o.a.createElement(Q.a,null,o.a.createElement(i.r,null,o.a.createElement(K,{anchor:this.anchorRef.current,isHorizontalDesign:x},o.a.createElement(i.b,{color:"white",dangerouslySetInlineStyle:{__style:{zIndex:G.a}},onFocus:this.handleDisplayCard,onMouseOver:this.handleDisplayCard,onMouseLeave:this.handleHideCard,position:"relative",width:"100%"},o.a.createElement(i.b,{width:"100%"},o.a.createElement(g,{isHorizontalDesign:x,userPins:m,showcase:p}),o.a.createElement(W,{avatarUrl:E,description:b,domainUrl:y,followerCount:v,id:_,isCreator:O,isHorizontalDesign:x,isVerified:S,userFullName:w,username:a,viewParameter:s,viewType:c}))))))))}}])&&te(n.prototype,a),l&&te(n,l),t}();t.a=Object(D.compose)(Z.e,X.a)(se)}}]);
//# sourceMappingURL=pjs-6-887e9b0aea40cbaeb264.js.map
